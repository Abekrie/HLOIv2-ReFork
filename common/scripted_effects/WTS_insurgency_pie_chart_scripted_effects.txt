#	This file is designated for effects that would modify the composition
#	of the pie charts in the Watson counter insurgency GUI.
#
#	For each non on-action effect, temporary variable "pie_chart_change" is set in the effect block. 
#	
#	If a faction has less popularity than the amount it is going to be subtracted 
#	from them, they are discarded from the effect. 
#	if another faction is weak enough (i.e under the number they are being subtracted from),
#	it is liquidated from the region and whatever power it had is added to the scripted effect's
#	benefactor.
#
#South England
WTS_south_england_adding_government = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_south_england_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_south_england_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_south_england_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_south_england_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_south_england_government
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_south_england_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_south_england_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_south_england_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_south_england_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_south_england_government
			value = var:WTS.counter_insurgency_south_england_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_south_england_teammates
			value = var:WTS.counter_insurgency_south_england_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_south_england_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_south_england_government
				value = var:WTS.counter_insurgency_south_england_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_south_england_welsh
				value = var:WTS.counter_insurgency_south_england_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_south_england_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_south_england_government
				value = var:WTS.counter_insurgency_south_england_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_south_england_irish
				value = var:WTS.counter_insurgency_south_england_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_south_england_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_south_england_government
				value = var:WTS.counter_insurgency_south_england_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_south_england_antis
				value = var:WTS.counter_insurgency_south_england_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_south_england_adding_teammates = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_south_england_government
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = government_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_south_england_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_south_england_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_south_england_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_south_england_teammates
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = government_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_south_england_government
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_south_england_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_south_england_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_south_england_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = government_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_south_england_teammates
			value = var:WTS.counter_insurgency_south_england_government
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_south_england_teammates
			value = var:WTS.counter_insurgency_south_england_government
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_south_england_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_south_england_teammates
				value = var:WTS.counter_insurgency_south_england_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_south_england_welsh
				value = var:WTS.counter_insurgency_south_england_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_south_england_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_south_england_teammates
				value = var:WTS.counter_insurgency_south_england_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_south_england_irish
				value = var:WTS.counter_insurgency_south_england_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_south_england_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_south_england_teammates
				value = var:WTS.counter_insurgency_south_england_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_south_england_antis
				value = var:WTS.counter_insurgency_south_england_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_south_england_adding_welsh = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_south_england_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_south_england_government
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = government_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_south_england_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_south_england_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_south_england_welsh
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_south_england_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = government_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_south_england_government
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_south_england_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_south_england_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_south_england_welsh
			value = var:WTS.counter_insurgency_south_england_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_south_england_teammates
			value = var:WTS.counter_insurgency_south_england_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = government_subtracting
					check_variable = {
						var = WTS.counter_insurgency_south_england_government
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_south_england_welsh
				value = var:WTS.counter_insurgency_south_england_government
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_south_england_government
				value = var:WTS.counter_insurgency_south_england_government
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_south_england_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_south_england_welsh
				value = var:WTS.counter_insurgency_south_england_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_south_england_irish
				value = var:WTS.counter_insurgency_south_england_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_south_england_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_south_england_welsh
				value = var:WTS.counter_insurgency_south_england_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_south_england_antis
				value = var:WTS.counter_insurgency_south_england_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_south_england_adding_irish = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_south_england_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_south_england_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_south_england_government
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = government_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_south_england_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_south_england_irish
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_south_england_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_south_england_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = government_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_south_england_government
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_south_england_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_south_england_irish
			value = var:WTS.counter_insurgency_south_england_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_south_england_teammates
			value = var:WTS.counter_insurgency_south_england_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_south_england_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_south_england_irish
				value = var:WTS.counter_insurgency_south_england_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_south_england_welsh
				value = var:WTS.counter_insurgency_south_england_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = government_subtracting
					check_variable = {
						var = WTS.counter_insurgency_south_england_government
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_south_england_irish
				value = var:WTS.counter_insurgency_south_england_government
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_south_england_government
				value = var:WTS.counter_insurgency_south_england_government
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_south_england_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_south_england_irish
				value = var:WTS.counter_insurgency_south_england_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_south_england_antis
				value = var:WTS.counter_insurgency_south_england_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

#East England
WTS_east_england_adding_government = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_east_england_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_east_england_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_east_england_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_east_england_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_east_england_government
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_east_england_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_east_england_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_east_england_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_east_england_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_east_england_government
			value = var:WTS.counter_insurgency_east_england_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_east_england_teammates
			value = var:WTS.counter_insurgency_east_england_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_east_england_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_east_england_government
				value = var:WTS.counter_insurgency_east_england_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_east_england_welsh
				value = var:WTS.counter_insurgency_east_england_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_east_england_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_east_england_government
				value = var:WTS.counter_insurgency_east_england_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_east_england_irish
				value = var:WTS.counter_insurgency_east_england_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_east_england_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_east_england_government
				value = var:WTS.counter_insurgency_east_england_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_east_england_antis
				value = var:WTS.counter_insurgency_east_england_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_east_england_adding_teammates = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_east_england_government
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = government_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_east_england_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_east_england_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_east_england_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_east_england_teammates
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = government_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_east_england_government
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_east_england_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_east_england_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_east_england_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = government_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_east_england_teammates
			value = var:WTS.counter_insurgency_east_england_government
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_east_england_teammates
			value = var:WTS.counter_insurgency_east_england_government
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_east_england_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_east_england_teammates
				value = var:WTS.counter_insurgency_east_england_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_east_england_welsh
				value = var:WTS.counter_insurgency_east_england_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_east_england_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_east_england_teammates
				value = var:WTS.counter_insurgency_east_england_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_east_england_irish
				value = var:WTS.counter_insurgency_east_england_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_east_england_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_east_england_teammates
				value = var:WTS.counter_insurgency_east_england_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_east_england_antis
				value = var:WTS.counter_insurgency_east_england_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_east_england_adding_welsh = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_east_england_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_east_england_government
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = government_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_east_england_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_east_england_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_east_england_welsh
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_east_england_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = government_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_east_england_government
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_east_england_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_east_england_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_east_england_welsh
			value = var:WTS.counter_insurgency_east_england_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_east_england_teammates
			value = var:WTS.counter_insurgency_east_england_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = government_subtracting
					check_variable = {
						var = WTS.counter_insurgency_east_england_government
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_east_england_welsh
				value = var:WTS.counter_insurgency_east_england_government
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_east_england_government
				value = var:WTS.counter_insurgency_east_england_government
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_east_england_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_east_england_welsh
				value = var:WTS.counter_insurgency_east_england_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_east_england_irish
				value = var:WTS.counter_insurgency_east_england_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_east_england_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_east_england_welsh
				value = var:WTS.counter_insurgency_east_england_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_east_england_antis
				value = var:WTS.counter_insurgency_east_england_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_east_england_adding_irish = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_east_england_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_east_england_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_east_england_government
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = government_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_east_england_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_east_england_irish
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_east_england_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_east_england_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = government_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_east_england_government
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_east_england_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_east_england_irish
			value = var:WTS.counter_insurgency_east_england_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_east_england_teammates
			value = var:WTS.counter_insurgency_east_england_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_east_england_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_east_england_irish
				value = var:WTS.counter_insurgency_east_england_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_east_england_welsh
				value = var:WTS.counter_insurgency_east_england_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = government_subtracting
					check_variable = {
						var = WTS.counter_insurgency_east_england_government
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_east_england_irish
				value = var:WTS.counter_insurgency_east_england_government
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_east_england_government
				value = var:WTS.counter_insurgency_east_england_government
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_east_england_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_east_england_irish
				value = var:WTS.counter_insurgency_east_england_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_east_england_antis
				value = var:WTS.counter_insurgency_east_england_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

#East England
WTS_london_adding_government = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_london_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_london_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_london_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_london_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_london_government
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_london_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_london_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_london_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_london_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_london_government
			value = var:WTS.counter_insurgency_london_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_london_teammates
			value = var:WTS.counter_insurgency_london_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_london_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_london_government
				value = var:WTS.counter_insurgency_london_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_london_welsh
				value = var:WTS.counter_insurgency_london_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_london_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_london_government
				value = var:WTS.counter_insurgency_london_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_london_irish
				value = var:WTS.counter_insurgency_london_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_london_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_london_government
				value = var:WTS.counter_insurgency_london_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_london_antis
				value = var:WTS.counter_insurgency_london_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_london_adding_teammates = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_london_government
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = government_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_london_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_london_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_london_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_london_teammates
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = government_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_london_government
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_london_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_london_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_london_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = government_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_london_teammates
			value = var:WTS.counter_insurgency_london_government
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_london_teammates
			value = var:WTS.counter_insurgency_london_government
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_london_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_london_teammates
				value = var:WTS.counter_insurgency_london_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_london_welsh
				value = var:WTS.counter_insurgency_london_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_london_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_london_teammates
				value = var:WTS.counter_insurgency_london_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_london_irish
				value = var:WTS.counter_insurgency_london_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_london_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_london_teammates
				value = var:WTS.counter_insurgency_london_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_london_antis
				value = var:WTS.counter_insurgency_london_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_london_adding_welsh = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_london_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_london_government
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = government_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_london_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_london_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_london_welsh
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_london_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = government_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_london_government
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_london_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_london_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_london_welsh
			value = var:WTS.counter_insurgency_london_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_london_teammates
			value = var:WTS.counter_insurgency_london_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = government_subtracting
					check_variable = {
						var = WTS.counter_insurgency_london_government
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_london_welsh
				value = var:WTS.counter_insurgency_london_government
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_london_government
				value = var:WTS.counter_insurgency_london_government
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_london_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_london_welsh
				value = var:WTS.counter_insurgency_london_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_london_irish
				value = var:WTS.counter_insurgency_london_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_london_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_london_welsh
				value = var:WTS.counter_insurgency_london_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_london_antis
				value = var:WTS.counter_insurgency_london_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_london_adding_irish = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_london_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_london_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_london_government
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = government_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_london_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_london_irish
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_london_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_london_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = government_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_london_government
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_london_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_london_irish
			value = var:WTS.counter_insurgency_london_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_london_teammates
			value = var:WTS.counter_insurgency_london_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_london_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_london_irish
				value = var:WTS.counter_insurgency_london_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_london_welsh
				value = var:WTS.counter_insurgency_london_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = government_subtracting
					check_variable = {
						var = WTS.counter_insurgency_london_government
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_london_irish
				value = var:WTS.counter_insurgency_london_government
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_london_government
				value = var:WTS.counter_insurgency_london_government
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_london_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_london_irish
				value = var:WTS.counter_insurgency_london_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_london_antis
				value = var:WTS.counter_insurgency_london_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

#East England
WTS_west_midlands_adding_government = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_west_midlands_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_west_midlands_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_west_midlands_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_west_midlands_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_west_midlands_government
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_west_midlands_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_west_midlands_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_west_midlands_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_west_midlands_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_west_midlands_government
			value = var:WTS.counter_insurgency_west_midlands_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_west_midlands_teammates
			value = var:WTS.counter_insurgency_west_midlands_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_west_midlands_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_west_midlands_government
				value = var:WTS.counter_insurgency_west_midlands_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_west_midlands_welsh
				value = var:WTS.counter_insurgency_west_midlands_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_west_midlands_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_west_midlands_government
				value = var:WTS.counter_insurgency_west_midlands_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_west_midlands_irish
				value = var:WTS.counter_insurgency_west_midlands_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_west_midlands_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_west_midlands_government
				value = var:WTS.counter_insurgency_west_midlands_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_west_midlands_antis
				value = var:WTS.counter_insurgency_west_midlands_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_west_midlands_adding_teammates = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_west_midlands_government
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = government_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_west_midlands_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_west_midlands_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_west_midlands_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_west_midlands_teammates
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = government_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_west_midlands_government
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_west_midlands_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_west_midlands_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_west_midlands_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = government_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_west_midlands_teammates
			value = var:WTS.counter_insurgency_west_midlands_government
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_west_midlands_teammates
			value = var:WTS.counter_insurgency_west_midlands_government
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_west_midlands_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_west_midlands_teammates
				value = var:WTS.counter_insurgency_west_midlands_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_west_midlands_welsh
				value = var:WTS.counter_insurgency_west_midlands_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_west_midlands_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_west_midlands_teammates
				value = var:WTS.counter_insurgency_west_midlands_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_west_midlands_irish
				value = var:WTS.counter_insurgency_west_midlands_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_west_midlands_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_west_midlands_teammates
				value = var:WTS.counter_insurgency_west_midlands_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_west_midlands_antis
				value = var:WTS.counter_insurgency_west_midlands_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_west_midlands_adding_welsh = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_west_midlands_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_west_midlands_government
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = government_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_west_midlands_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_west_midlands_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_west_midlands_welsh
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_west_midlands_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = government_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_west_midlands_government
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_west_midlands_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_west_midlands_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_west_midlands_welsh
			value = var:WTS.counter_insurgency_west_midlands_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_west_midlands_teammates
			value = var:WTS.counter_insurgency_west_midlands_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = government_subtracting
					check_variable = {
						var = WTS.counter_insurgency_west_midlands_government
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_west_midlands_welsh
				value = var:WTS.counter_insurgency_west_midlands_government
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_west_midlands_government
				value = var:WTS.counter_insurgency_west_midlands_government
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_west_midlands_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_west_midlands_welsh
				value = var:WTS.counter_insurgency_west_midlands_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_west_midlands_irish
				value = var:WTS.counter_insurgency_west_midlands_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_west_midlands_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_west_midlands_welsh
				value = var:WTS.counter_insurgency_west_midlands_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_west_midlands_antis
				value = var:WTS.counter_insurgency_west_midlands_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_west_midlands_adding_irish = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_west_midlands_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_west_midlands_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_west_midlands_government
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = government_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_west_midlands_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_west_midlands_irish
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_west_midlands_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_west_midlands_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = government_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_west_midlands_government
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_west_midlands_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_west_midlands_irish
			value = var:WTS.counter_insurgency_west_midlands_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_west_midlands_teammates
			value = var:WTS.counter_insurgency_west_midlands_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_west_midlands_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_west_midlands_irish
				value = var:WTS.counter_insurgency_west_midlands_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_west_midlands_welsh
				value = var:WTS.counter_insurgency_west_midlands_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = government_subtracting
					check_variable = {
						var = WTS.counter_insurgency_west_midlands_government
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_west_midlands_irish
				value = var:WTS.counter_insurgency_west_midlands_government
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_west_midlands_government
				value = var:WTS.counter_insurgency_west_midlands_government
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_west_midlands_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_west_midlands_irish
				value = var:WTS.counter_insurgency_west_midlands_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_west_midlands_antis
				value = var:WTS.counter_insurgency_west_midlands_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

#East England
WTS_wales_adding_government = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_wales_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_wales_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_wales_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_wales_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_wales_government
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_wales_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_wales_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_wales_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_wales_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_wales_government
			value = var:WTS.counter_insurgency_wales_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_wales_teammates
			value = var:WTS.counter_insurgency_wales_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_wales_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_wales_government
				value = var:WTS.counter_insurgency_wales_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_wales_welsh
				value = var:WTS.counter_insurgency_wales_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_wales_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_wales_government
				value = var:WTS.counter_insurgency_wales_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_wales_irish
				value = var:WTS.counter_insurgency_wales_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_wales_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_wales_government
				value = var:WTS.counter_insurgency_wales_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_wales_antis
				value = var:WTS.counter_insurgency_wales_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_wales_adding_teammates = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_wales_government
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = government_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_wales_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_wales_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_wales_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_wales_teammates
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = government_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_wales_government
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_wales_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_wales_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_wales_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = government_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_wales_teammates
			value = var:WTS.counter_insurgency_wales_government
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_wales_teammates
			value = var:WTS.counter_insurgency_wales_government
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_wales_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_wales_teammates
				value = var:WTS.counter_insurgency_wales_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_wales_welsh
				value = var:WTS.counter_insurgency_wales_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_wales_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_wales_teammates
				value = var:WTS.counter_insurgency_wales_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_wales_irish
				value = var:WTS.counter_insurgency_wales_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_wales_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_wales_teammates
				value = var:WTS.counter_insurgency_wales_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_wales_antis
				value = var:WTS.counter_insurgency_wales_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_wales_adding_welsh = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_wales_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_wales_government
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = government_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_wales_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_wales_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_wales_welsh
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_wales_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = government_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_wales_government
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_wales_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_wales_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_wales_welsh
			value = var:WTS.counter_insurgency_wales_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_wales_teammates
			value = var:WTS.counter_insurgency_wales_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = government_subtracting
					check_variable = {
						var = WTS.counter_insurgency_wales_government
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_wales_welsh
				value = var:WTS.counter_insurgency_wales_government
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_wales_government
				value = var:WTS.counter_insurgency_wales_government
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_wales_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_wales_welsh
				value = var:WTS.counter_insurgency_wales_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_wales_irish
				value = var:WTS.counter_insurgency_wales_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_wales_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_wales_welsh
				value = var:WTS.counter_insurgency_wales_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_wales_antis
				value = var:WTS.counter_insurgency_wales_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_wales_adding_irish = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_wales_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_wales_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_wales_government
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = government_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_wales_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_wales_irish
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_wales_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_wales_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = government_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_wales_government
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_wales_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_wales_irish
			value = var:WTS.counter_insurgency_wales_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_wales_teammates
			value = var:WTS.counter_insurgency_wales_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_wales_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_wales_irish
				value = var:WTS.counter_insurgency_wales_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_wales_welsh
				value = var:WTS.counter_insurgency_wales_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = government_subtracting
					check_variable = {
						var = WTS.counter_insurgency_wales_government
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_wales_irish
				value = var:WTS.counter_insurgency_wales_government
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_wales_government
				value = var:WTS.counter_insurgency_wales_government
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_wales_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_wales_irish
				value = var:WTS.counter_insurgency_wales_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_wales_antis
				value = var:WTS.counter_insurgency_wales_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

#East England
WTS_north_england_adding_government = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_north_england_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_north_england_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_north_england_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_north_england_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_north_england_government
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_north_england_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_north_england_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_north_england_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_north_england_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_north_england_government
			value = var:WTS.counter_insurgency_north_england_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_north_england_teammates
			value = var:WTS.counter_insurgency_north_england_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_north_england_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_north_england_government
				value = var:WTS.counter_insurgency_north_england_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_north_england_welsh
				value = var:WTS.counter_insurgency_north_england_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_north_england_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_north_england_government
				value = var:WTS.counter_insurgency_north_england_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_north_england_irish
				value = var:WTS.counter_insurgency_north_england_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_north_england_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_north_england_government
				value = var:WTS.counter_insurgency_north_england_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_north_england_antis
				value = var:WTS.counter_insurgency_north_england_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_north_england_adding_teammates = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_north_england_government
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = government_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_north_england_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_north_england_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_north_england_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_north_england_teammates
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = government_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_north_england_government
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_north_england_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_north_england_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_north_england_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = government_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_north_england_teammates
			value = var:WTS.counter_insurgency_north_england_government
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_north_england_teammates
			value = var:WTS.counter_insurgency_north_england_government
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_north_england_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_north_england_teammates
				value = var:WTS.counter_insurgency_north_england_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_north_england_welsh
				value = var:WTS.counter_insurgency_north_england_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_north_england_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_north_england_teammates
				value = var:WTS.counter_insurgency_north_england_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_north_england_irish
				value = var:WTS.counter_insurgency_north_england_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_north_england_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_north_england_teammates
				value = var:WTS.counter_insurgency_north_england_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_north_england_antis
				value = var:WTS.counter_insurgency_north_england_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_north_england_adding_welsh = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_north_england_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_north_england_government
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = government_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_north_england_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_north_england_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_north_england_welsh
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_north_england_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = government_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_north_england_government
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_north_england_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_north_england_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_north_england_welsh
			value = var:WTS.counter_insurgency_north_england_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_north_england_teammates
			value = var:WTS.counter_insurgency_north_england_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = government_subtracting
					check_variable = {
						var = WTS.counter_insurgency_north_england_government
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_north_england_welsh
				value = var:WTS.counter_insurgency_north_england_government
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_north_england_government
				value = var:WTS.counter_insurgency_north_england_government
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_north_england_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_north_england_welsh
				value = var:WTS.counter_insurgency_north_england_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_north_england_irish
				value = var:WTS.counter_insurgency_north_england_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_north_england_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_north_england_welsh
				value = var:WTS.counter_insurgency_north_england_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_north_england_antis
				value = var:WTS.counter_insurgency_north_england_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_north_england_adding_irish = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_north_england_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_north_england_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_north_england_government
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = government_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_north_england_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_north_england_irish
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_north_england_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_north_england_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = government_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_north_england_government
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_north_england_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_north_england_irish
			value = var:WTS.counter_insurgency_north_england_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_north_england_teammates
			value = var:WTS.counter_insurgency_north_england_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_north_england_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_north_england_irish
				value = var:WTS.counter_insurgency_north_england_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_north_england_welsh
				value = var:WTS.counter_insurgency_north_england_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = government_subtracting
					check_variable = {
						var = WTS.counter_insurgency_north_england_government
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_north_england_irish
				value = var:WTS.counter_insurgency_north_england_government
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_north_england_government
				value = var:WTS.counter_insurgency_north_england_government
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_north_england_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_north_england_irish
				value = var:WTS.counter_insurgency_north_england_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_north_england_antis
				value = var:WTS.counter_insurgency_north_england_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

#East England
WTS_scotland_adding_government = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_scotland_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_scotland_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_scotland_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_scotland_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_scotland_government
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_scotland_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_scotland_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_scotland_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_scotland_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_scotland_government
			value = var:WTS.counter_insurgency_scotland_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_scotland_teammates
			value = var:WTS.counter_insurgency_scotland_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_scotland_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_scotland_government
				value = var:WTS.counter_insurgency_scotland_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_scotland_welsh
				value = var:WTS.counter_insurgency_scotland_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_scotland_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_scotland_government
				value = var:WTS.counter_insurgency_scotland_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_scotland_irish
				value = var:WTS.counter_insurgency_scotland_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_scotland_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_scotland_government
				value = var:WTS.counter_insurgency_scotland_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_scotland_antis
				value = var:WTS.counter_insurgency_scotland_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_scotland_adding_teammates = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_scotland_government
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = government_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_scotland_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_scotland_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_scotland_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_scotland_teammates
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = government_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_scotland_government
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_scotland_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_scotland_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_scotland_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = government_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_scotland_teammates
			value = var:WTS.counter_insurgency_scotland_government
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_scotland_teammates
			value = var:WTS.counter_insurgency_scotland_government
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_scotland_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_scotland_teammates
				value = var:WTS.counter_insurgency_scotland_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_scotland_welsh
				value = var:WTS.counter_insurgency_scotland_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_scotland_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_scotland_teammates
				value = var:WTS.counter_insurgency_scotland_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_scotland_irish
				value = var:WTS.counter_insurgency_scotland_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_scotland_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_scotland_teammates
				value = var:WTS.counter_insurgency_scotland_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_scotland_antis
				value = var:WTS.counter_insurgency_scotland_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_scotland_adding_welsh = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_scotland_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_scotland_government
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = government_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_scotland_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_scotland_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_scotland_welsh
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_scotland_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = government_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_scotland_government
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_scotland_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_scotland_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_scotland_welsh
			value = var:WTS.counter_insurgency_scotland_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_scotland_teammates
			value = var:WTS.counter_insurgency_scotland_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = government_subtracting
					check_variable = {
						var = WTS.counter_insurgency_scotland_government
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_scotland_welsh
				value = var:WTS.counter_insurgency_scotland_government
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_scotland_government
				value = var:WTS.counter_insurgency_scotland_government
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_scotland_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_scotland_welsh
				value = var:WTS.counter_insurgency_scotland_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_scotland_irish
				value = var:WTS.counter_insurgency_scotland_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_scotland_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_scotland_welsh
				value = var:WTS.counter_insurgency_scotland_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_scotland_antis
				value = var:WTS.counter_insurgency_scotland_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_scotland_adding_irish = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_scotland_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_scotland_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_scotland_government
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = government_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_scotland_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_scotland_irish
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_scotland_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_scotland_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = government_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_scotland_government
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_scotland_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_scotland_irish
			value = var:WTS.counter_insurgency_scotland_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_scotland_teammates
			value = var:WTS.counter_insurgency_scotland_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_scotland_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_scotland_irish
				value = var:WTS.counter_insurgency_scotland_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_scotland_welsh
				value = var:WTS.counter_insurgency_scotland_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = government_subtracting
					check_variable = {
						var = WTS.counter_insurgency_scotland_government
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_scotland_irish
				value = var:WTS.counter_insurgency_scotland_government
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_scotland_government
				value = var:WTS.counter_insurgency_scotland_government
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_scotland_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_scotland_irish
				value = var:WTS.counter_insurgency_scotland_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_scotland_antis
				value = var:WTS.counter_insurgency_scotland_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

#East England
WTS_northern_ireland_adding_government = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_northern_ireland_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_northern_ireland_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_northern_ireland_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_northern_ireland_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_northern_ireland_government
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_northern_ireland_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northern_ireland_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northern_ireland_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northern_ireland_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_northern_ireland_government
			value = var:WTS.counter_insurgency_northern_ireland_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_northern_ireland_teammates
			value = var:WTS.counter_insurgency_northern_ireland_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_northern_ireland_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_northern_ireland_government
				value = var:WTS.counter_insurgency_northern_ireland_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northern_ireland_welsh
				value = var:WTS.counter_insurgency_northern_ireland_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_northern_ireland_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_northern_ireland_government
				value = var:WTS.counter_insurgency_northern_ireland_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northern_ireland_irish
				value = var:WTS.counter_insurgency_northern_ireland_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_northern_ireland_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_northern_ireland_government
				value = var:WTS.counter_insurgency_northern_ireland_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northern_ireland_antis
				value = var:WTS.counter_insurgency_northern_ireland_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_northern_ireland_adding_teammates = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_northern_ireland_government
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = government_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_northern_ireland_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_northern_ireland_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_northern_ireland_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_northern_ireland_teammates
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = government_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_northern_ireland_government
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northern_ireland_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northern_ireland_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northern_ireland_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = government_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_northern_ireland_teammates
			value = var:WTS.counter_insurgency_northern_ireland_government
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_northern_ireland_teammates
			value = var:WTS.counter_insurgency_northern_ireland_government
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_northern_ireland_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_northern_ireland_teammates
				value = var:WTS.counter_insurgency_northern_ireland_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northern_ireland_welsh
				value = var:WTS.counter_insurgency_northern_ireland_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_northern_ireland_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_northern_ireland_teammates
				value = var:WTS.counter_insurgency_northern_ireland_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northern_ireland_irish
				value = var:WTS.counter_insurgency_northern_ireland_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_northern_ireland_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_northern_ireland_teammates
				value = var:WTS.counter_insurgency_northern_ireland_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northern_ireland_antis
				value = var:WTS.counter_insurgency_northern_ireland_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_northern_ireland_adding_welsh = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_northern_ireland_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_northern_ireland_government
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = government_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_northern_ireland_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_northern_ireland_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_northern_ireland_welsh
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_northern_ireland_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = government_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northern_ireland_government
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northern_ireland_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northern_ireland_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_northern_ireland_welsh
			value = var:WTS.counter_insurgency_northern_ireland_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_northern_ireland_teammates
			value = var:WTS.counter_insurgency_northern_ireland_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = government_subtracting
					check_variable = {
						var = WTS.counter_insurgency_northern_ireland_government
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_northern_ireland_welsh
				value = var:WTS.counter_insurgency_northern_ireland_government
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northern_ireland_government
				value = var:WTS.counter_insurgency_northern_ireland_government
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_northern_ireland_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_northern_ireland_welsh
				value = var:WTS.counter_insurgency_northern_ireland_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northern_ireland_irish
				value = var:WTS.counter_insurgency_northern_ireland_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_northern_ireland_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_northern_ireland_welsh
				value = var:WTS.counter_insurgency_northern_ireland_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northern_ireland_antis
				value = var:WTS.counter_insurgency_northern_ireland_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_northern_ireland_adding_irish = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_northern_ireland_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_northern_ireland_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_northern_ireland_government
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = government_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_northern_ireland_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_northern_ireland_irish
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_northern_ireland_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northern_ireland_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = government_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northern_ireland_government
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northern_ireland_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_northern_ireland_irish
			value = var:WTS.counter_insurgency_northern_ireland_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_northern_ireland_teammates
			value = var:WTS.counter_insurgency_northern_ireland_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_northern_ireland_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_northern_ireland_irish
				value = var:WTS.counter_insurgency_northern_ireland_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northern_ireland_welsh
				value = var:WTS.counter_insurgency_northern_ireland_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = government_subtracting
					check_variable = {
						var = WTS.counter_insurgency_northern_ireland_government
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_northern_ireland_irish
				value = var:WTS.counter_insurgency_northern_ireland_government
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northern_ireland_government
				value = var:WTS.counter_insurgency_northern_ireland_government
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_northern_ireland_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_northern_ireland_irish
				value = var:WTS.counter_insurgency_northern_ireland_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northern_ireland_antis
				value = var:WTS.counter_insurgency_northern_ireland_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

#East England
WTS_dublin_adding_government = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_dublin_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_dublin_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_dublin_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_dublin_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_dublin_government
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_dublin_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_dublin_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_dublin_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_dublin_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_dublin_government
			value = var:WTS.counter_insurgency_dublin_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_dublin_teammates
			value = var:WTS.counter_insurgency_dublin_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_dublin_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_dublin_government
				value = var:WTS.counter_insurgency_dublin_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_dublin_welsh
				value = var:WTS.counter_insurgency_dublin_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_dublin_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_dublin_government
				value = var:WTS.counter_insurgency_dublin_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_dublin_irish
				value = var:WTS.counter_insurgency_dublin_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_dublin_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_dublin_government
				value = var:WTS.counter_insurgency_dublin_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_dublin_antis
				value = var:WTS.counter_insurgency_dublin_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_dublin_adding_teammates = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_dublin_government
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = government_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_dublin_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_dublin_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_dublin_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_dublin_teammates
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = government_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_dublin_government
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_dublin_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_dublin_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_dublin_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = government_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_dublin_teammates
			value = var:WTS.counter_insurgency_dublin_government
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_dublin_teammates
			value = var:WTS.counter_insurgency_dublin_government
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_dublin_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_dublin_teammates
				value = var:WTS.counter_insurgency_dublin_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_dublin_welsh
				value = var:WTS.counter_insurgency_dublin_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_dublin_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_dublin_teammates
				value = var:WTS.counter_insurgency_dublin_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_dublin_irish
				value = var:WTS.counter_insurgency_dublin_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_dublin_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_dublin_teammates
				value = var:WTS.counter_insurgency_dublin_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_dublin_antis
				value = var:WTS.counter_insurgency_dublin_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_dublin_adding_welsh = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_dublin_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_dublin_government
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = government_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_dublin_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_dublin_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_dublin_welsh
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_dublin_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = government_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_dublin_government
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_dublin_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_dublin_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_dublin_welsh
			value = var:WTS.counter_insurgency_dublin_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_dublin_teammates
			value = var:WTS.counter_insurgency_dublin_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = government_subtracting
					check_variable = {
						var = WTS.counter_insurgency_dublin_government
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_dublin_welsh
				value = var:WTS.counter_insurgency_dublin_government
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_dublin_government
				value = var:WTS.counter_insurgency_dublin_government
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_dublin_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_dublin_welsh
				value = var:WTS.counter_insurgency_dublin_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_dublin_irish
				value = var:WTS.counter_insurgency_dublin_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_dublin_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_dublin_welsh
				value = var:WTS.counter_insurgency_dublin_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_dublin_antis
				value = var:WTS.counter_insurgency_dublin_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_dublin_adding_irish = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_dublin_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_dublin_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_dublin_government
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = government_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_dublin_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_dublin_irish
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_dublin_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_dublin_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = government_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_dublin_government
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_dublin_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_dublin_irish
			value = var:WTS.counter_insurgency_dublin_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_dublin_teammates
			value = var:WTS.counter_insurgency_dublin_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_dublin_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_dublin_irish
				value = var:WTS.counter_insurgency_dublin_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_dublin_welsh
				value = var:WTS.counter_insurgency_dublin_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = government_subtracting
					check_variable = {
						var = WTS.counter_insurgency_dublin_government
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_dublin_irish
				value = var:WTS.counter_insurgency_dublin_government
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_dublin_government
				value = var:WTS.counter_insurgency_dublin_government
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_dublin_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_dublin_irish
				value = var:WTS.counter_insurgency_dublin_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_dublin_antis
				value = var:WTS.counter_insurgency_dublin_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

#East England
WTS_southwest_ireland_adding_government = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_southwest_ireland_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_southwest_ireland_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_southwest_ireland_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_southwest_ireland_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_southwest_ireland_government
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_southwest_ireland_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_southwest_ireland_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_southwest_ireland_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_southwest_ireland_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_southwest_ireland_government
			value = var:WTS.counter_insurgency_southwest_ireland_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_southwest_ireland_teammates
			value = var:WTS.counter_insurgency_southwest_ireland_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_southwest_ireland_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_southwest_ireland_government
				value = var:WTS.counter_insurgency_southwest_ireland_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_southwest_ireland_welsh
				value = var:WTS.counter_insurgency_southwest_ireland_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_southwest_ireland_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_southwest_ireland_government
				value = var:WTS.counter_insurgency_southwest_ireland_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_southwest_ireland_irish
				value = var:WTS.counter_insurgency_southwest_ireland_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_southwest_ireland_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_southwest_ireland_government
				value = var:WTS.counter_insurgency_southwest_ireland_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_southwest_ireland_antis
				value = var:WTS.counter_insurgency_southwest_ireland_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_southwest_ireland_adding_teammates = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_southwest_ireland_government
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = government_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_southwest_ireland_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_southwest_ireland_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_southwest_ireland_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_southwest_ireland_teammates
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = government_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_southwest_ireland_government
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_southwest_ireland_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_southwest_ireland_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_southwest_ireland_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = government_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_southwest_ireland_teammates
			value = var:WTS.counter_insurgency_southwest_ireland_government
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_southwest_ireland_teammates
			value = var:WTS.counter_insurgency_southwest_ireland_government
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_southwest_ireland_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_southwest_ireland_teammates
				value = var:WTS.counter_insurgency_southwest_ireland_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_southwest_ireland_welsh
				value = var:WTS.counter_insurgency_southwest_ireland_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_southwest_ireland_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_southwest_ireland_teammates
				value = var:WTS.counter_insurgency_southwest_ireland_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_southwest_ireland_irish
				value = var:WTS.counter_insurgency_southwest_ireland_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_southwest_ireland_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_southwest_ireland_teammates
				value = var:WTS.counter_insurgency_southwest_ireland_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_southwest_ireland_antis
				value = var:WTS.counter_insurgency_southwest_ireland_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_southwest_ireland_adding_welsh = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_southwest_ireland_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_southwest_ireland_government
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = government_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_southwest_ireland_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_southwest_ireland_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_southwest_ireland_welsh
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_southwest_ireland_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = government_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_southwest_ireland_government
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_southwest_ireland_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_southwest_ireland_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_southwest_ireland_welsh
			value = var:WTS.counter_insurgency_southwest_ireland_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_southwest_ireland_teammates
			value = var:WTS.counter_insurgency_southwest_ireland_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = government_subtracting
					check_variable = {
						var = WTS.counter_insurgency_southwest_ireland_government
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_southwest_ireland_welsh
				value = var:WTS.counter_insurgency_southwest_ireland_government
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_southwest_ireland_government
				value = var:WTS.counter_insurgency_southwest_ireland_government
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_southwest_ireland_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_southwest_ireland_welsh
				value = var:WTS.counter_insurgency_southwest_ireland_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_southwest_ireland_irish
				value = var:WTS.counter_insurgency_southwest_ireland_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_southwest_ireland_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_southwest_ireland_welsh
				value = var:WTS.counter_insurgency_southwest_ireland_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_southwest_ireland_antis
				value = var:WTS.counter_insurgency_southwest_ireland_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_southwest_ireland_adding_irish = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_southwest_ireland_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_southwest_ireland_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_southwest_ireland_government
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = government_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_southwest_ireland_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_southwest_ireland_irish
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_southwest_ireland_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_southwest_ireland_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = government_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_southwest_ireland_government
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_southwest_ireland_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_southwest_ireland_irish
			value = var:WTS.counter_insurgency_southwest_ireland_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_southwest_ireland_teammates
			value = var:WTS.counter_insurgency_southwest_ireland_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_southwest_ireland_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_southwest_ireland_irish
				value = var:WTS.counter_insurgency_southwest_ireland_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_southwest_ireland_welsh
				value = var:WTS.counter_insurgency_southwest_ireland_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = government_subtracting
					check_variable = {
						var = WTS.counter_insurgency_southwest_ireland_government
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_southwest_ireland_irish
				value = var:WTS.counter_insurgency_southwest_ireland_government
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_southwest_ireland_government
				value = var:WTS.counter_insurgency_southwest_ireland_government
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_southwest_ireland_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_southwest_ireland_irish
				value = var:WTS.counter_insurgency_southwest_ireland_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_southwest_ireland_antis
				value = var:WTS.counter_insurgency_southwest_ireland_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

#East England
WTS_northwest_ireland_adding_government = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_northwest_ireland_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_northwest_ireland_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_northwest_ireland_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_northwest_ireland_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_northwest_ireland_government
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_northwest_ireland_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northwest_ireland_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northwest_ireland_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northwest_ireland_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_northwest_ireland_government
			value = var:WTS.counter_insurgency_northwest_ireland_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_northwest_ireland_teammates
			value = var:WTS.counter_insurgency_northwest_ireland_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_northwest_ireland_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_northwest_ireland_government
				value = var:WTS.counter_insurgency_northwest_ireland_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northwest_ireland_welsh
				value = var:WTS.counter_insurgency_northwest_ireland_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_northwest_ireland_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_northwest_ireland_government
				value = var:WTS.counter_insurgency_northwest_ireland_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northwest_ireland_irish
				value = var:WTS.counter_insurgency_northwest_ireland_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_northwest_ireland_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_northwest_ireland_government
				value = var:WTS.counter_insurgency_northwest_ireland_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northwest_ireland_antis
				value = var:WTS.counter_insurgency_northwest_ireland_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_northwest_ireland_adding_teammates = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_northwest_ireland_government
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = government_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_northwest_ireland_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_northwest_ireland_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_northwest_ireland_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_northwest_ireland_teammates
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = government_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_northwest_ireland_government
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northwest_ireland_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northwest_ireland_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northwest_ireland_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = government_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_northwest_ireland_teammates
			value = var:WTS.counter_insurgency_northwest_ireland_government
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_northwest_ireland_teammates
			value = var:WTS.counter_insurgency_northwest_ireland_government
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_northwest_ireland_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_northwest_ireland_teammates
				value = var:WTS.counter_insurgency_northwest_ireland_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northwest_ireland_welsh
				value = var:WTS.counter_insurgency_northwest_ireland_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_northwest_ireland_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_northwest_ireland_teammates
				value = var:WTS.counter_insurgency_northwest_ireland_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northwest_ireland_irish
				value = var:WTS.counter_insurgency_northwest_ireland_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_northwest_ireland_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_northwest_ireland_teammates
				value = var:WTS.counter_insurgency_northwest_ireland_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northwest_ireland_antis
				value = var:WTS.counter_insurgency_northwest_ireland_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_northwest_ireland_adding_welsh = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_northwest_ireland_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_northwest_ireland_government
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = government_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_northwest_ireland_irish
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = irish_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_northwest_ireland_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_northwest_ireland_welsh
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_northwest_ireland_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = government_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northwest_ireland_government
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = irish_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northwest_ireland_irish
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northwest_ireland_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_northwest_ireland_welsh
			value = var:WTS.counter_insurgency_northwest_ireland_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_northwest_ireland_teammates
			value = var:WTS.counter_insurgency_northwest_ireland_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = government_subtracting
					check_variable = {
						var = WTS.counter_insurgency_northwest_ireland_government
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_northwest_ireland_welsh
				value = var:WTS.counter_insurgency_northwest_ireland_government
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northwest_ireland_government
				value = var:WTS.counter_insurgency_northwest_ireland_government
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = irish_subtracting
					check_variable = {
						var = WTS.counter_insurgency_northwest_ireland_irish
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_northwest_ireland_welsh
				value = var:WTS.counter_insurgency_northwest_ireland_irish
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northwest_ireland_irish
				value = var:WTS.counter_insurgency_northwest_ireland_irish
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_northwest_ireland_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_northwest_ireland_welsh
				value = var:WTS.counter_insurgency_northwest_ireland_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northwest_ireland_antis
				value = var:WTS.counter_insurgency_northwest_ireland_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}

WTS_northwest_ireland_adding_irish = {
	#used to determine the minimum threshold 
	set_temp_variable = {
		var = pie_chart_minimum_threshold
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_minimum_threshold
		value = 4		#4 is used since it is the maximum no. of factions you could have 
	}
	#Used to filter out variables which are below the minimum threshold
	set_temp_variable = {
		var = pie_chart_divisor
		value = 0
	}
	if = {
		limit = {
			check_variable = {
				var = WTS.counter_insurgency_northwest_ireland_teammates
				value = var:pie_chart_minimum_threshold
				compare = greater_than_or_equals
			}
		}
		set_temp_variable = {
			var = teammates_subtracting
			value = 1
		}
		add_to_temp_variable = {
			var = pie_chart_divisor
			value = 1
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_northwest_ireland_welsh
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = welsh_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_northwest_ireland_government
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = government_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = WTS.counter_insurgency_northwest_ireland_antis
					value = var:pie_chart_minimum_threshold
					compare = greater_than_or_equals
				}
			}
			set_temp_variable = {
				var = antis_subtracting
				value = 1
			}
			add_to_temp_variable = {
				var = pie_chart_divisor
				value = 1
			}
		}
	}
	#Now that the divisor is confirmed, the subtractor can now be set
	set_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_change
	}
	divide_temp_variable = {
		var = pie_chart_subtractor
		value = pie_chart_divisor
	}
	#Now that the subtractor is set, it's time to add the changes
	add_to_variable = {
		var = WTS.counter_insurgency_northwest_ireland_irish
		value = var:pie_chart_change
	}
	if = {
		limit = {
			has_variable = teammates_subtracting
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_northwest_ireland_teammates
			value = var:pie_chart_subtractor
		}
		else_if = {
			limit = {
				has_variable = welsh_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northwest_ireland_welsh
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = government_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northwest_ireland_government
				value = var:pie_chart_subtractor
			}
		}
		else_if = {
			limit = {
				has_variable = antis_subtracting
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northwest_ireland_antis
				value = var:pie_chart_subtractor
			}
		}
	}
	#Liquidation now, this is put last as to not distract from the other calculation
	if = {
		limit = {
			NOT = {
				has_variable = teammates_subtracting
			}
		}
		add_to_variable = {
			var = WTS.counter_insurgency_northwest_ireland_irish
			value = var:WTS.counter_insurgency_northwest_ireland_teammates
		}
		subtract_from_variable = {
			var = WTS.counter_insurgency_northwest_ireland_teammates
			value = var:WTS.counter_insurgency_northwest_ireland_teammates
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = welsh_subtracting
					check_variable = {
						var = WTS.counter_insurgency_northwest_ireland_welsh
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_northwest_ireland_irish
				value = var:WTS.counter_insurgency_northwest_ireland_welsh
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northwest_ireland_welsh
				value = var:WTS.counter_insurgency_northwest_ireland_welsh
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = government_subtracting
					check_variable = {
						var = WTS.counter_insurgency_northwest_ireland_government
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_northwest_ireland_irish
				value = var:WTS.counter_insurgency_northwest_ireland_government
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northwest_ireland_government
				value = var:WTS.counter_insurgency_northwest_ireland_government
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_variable = antis_subtracting
					check_variable = {
						var = WTS.counter_insurgency_northwest_ireland_antis
						value = 0
						compare = equals
					}
				}
			}
			add_to_variable = {
				var = WTS.counter_insurgency_northwest_ireland_irish
				value = var:WTS.counter_insurgency_northwest_ireland_antis
			}
			subtract_from_variable = {
				var = WTS.counter_insurgency_northwest_ireland_antis
				value = var:WTS.counter_insurgency_northwest_ireland_antis
			}
		}
	}
	WTS = {
		WTS_create_insurgency_pie_charts = yes
	}
}
