GNW_move_to_neutrality = {
	remove_from_array = {
		array = global.gnw_fubuki_allies
		value = ROOT.id
	}
	remove_from_array = {
		array = global.gnw_noel_allies
		value = ROOT.id
	}
	remove_from_array = {
		array = global.gnw_on_fence
		value = ROOT.id
	}
	add_to_array = {
		array = global.gnw_neutral
		value = ROOT.id
	}
}

GNW_move_to_on_fence = {
	remove_from_array = {
		array = global.gnw_fubuki_allies
		value = ROOT.id
	}
	remove_from_array = {
		array = global.gnw_noel_allies
		value = ROOT.id
	}
	remove_from_array = {
		array = global.gnw_neutral
		value = ROOT.id
	}
	add_to_array = {
		array = global.gnw_on_fence
		value = ROOT.id
	}
}

GNW_move_to_fubuki = {
	remove_from_array = {
		array = global.gnw_noel_allies
		value = ROOT.id
	}
	remove_from_array = {
		array = global.gnw_neutral
		value = ROOT.id
	}
	remove_from_array = {
		array = global.gnw_on_fence
		value = ROOT.id
	}
	add_to_array = {
		array = global.gnw_fubuki_allies
		value = ROOT.id
	}
}

GNW_move_to_noel = {
	remove_from_array = {
		array = global.gnw_fubuki_allies
		value = ROOT.id
	}
	remove_from_array = {
		array = global.gnw_neutral
		value = ROOT.id
	}
	remove_from_array = {
		array = global.gnw_on_fence
		value = ROOT.id
	}
	add_to_array = {
		array = global.gnw_noel_allies
		value = ROOT.id
	}
}

GNW_NOE_crushed_completely = {
	NOE = {
		set_politics = {
			ruling_party = pro_yagoo_kleptocracy
		}
		add_ideas = NOE_treaty_of_gotland_crushed_completely
	}
	set_stability = 0
	KRO = {
		transfer_state = 87
		transfer_state = 98
		transfer_state = 97
		transfer_state = 807
		transfer_state = 92
		transfer_state = 10
		transfer_state = 90
		transfer_state = 88
		transfer_state = 762
		transfer_state = 86
		transfer_state = 68
		transfer_state = 66
		transfer_state = 67
		transfer_state = 762
	}
	if = {
		limit = {
			NOE = {
				owns_state = 72
			}
		}
		KRO = {
			transfer_state = 72
		}
	}
	if = {
		limit = {
			KRO = {
				owns_state = 397
			}
		}
		FBK = {
			transfer_state = 72
		}
		KRO = {
			set_capital = {
				state = 10
			}
		}
	}
}

GNW_NOE_autonomous_baltics = {
	NOE = {
		set_politics = {
			ruling_party = pro_yagoo_kleptocracy
		}
		add_ideas = NOE_treaty_of_gotland_autonomous_baltics
	}
	set_stability = 0
	KRO = {
		transfer_state = 87
		transfer_state = 98
		transfer_state = 97
		transfer_state = 807
		transfer_state = 92
		transfer_state = 10
		transfer_state = 90
		transfer_state = 88
		transfer_state = 762
		transfer_state = 86
		transfer_state = 68
		transfer_state = 66
		transfer_state = 67
		transfer_state = 762
	}
	if = {
		limit = {
			NOE = {
				owns_state = 72
			}
		}
		KRO = {
			transfer_state = 72
		}
	}
	if = {
		limit = {
			KRO = {
				owns_state = 397
			}
		}
		FBK = {
			transfer_state = 72
		}
		KRO = {
			set_capital = {
				state = 10
			}
		}
	}
	FBK = {
		if = {
			limit = {
				has_dlc = "Together for Victory"
			}
			release_autonomy = {
				target = EST
				autonomy_state = autonomy_collaboration_government
			}
			release_autonomy = {
				target = LAT
				autonomy_state = autonomy_collaboration_government
			}
			release_autonomy = {
				target = LIT
				autonomy_state = autonomy_collaboration_government
			}
			else = {
				release_puppet = LIT
				release_puppet = LAT
				release_puppet = EST
			}
		}
	}
}

GNW_NOE_independent_baltics = {
	NOE = {
		set_politics = {
			ruling_party = pro_yagoo_kleptocracy
		}
		add_ideas = NOE_treaty_of_gotland_autonomous_baltics
	}
	set_stability = 0
	KRO = {
		transfer_state = 87
		transfer_state = 98
		transfer_state = 97
		transfer_state = 807
		transfer_state = 92
		transfer_state = 10
		transfer_state = 90
		transfer_state = 88
		transfer_state = 762
		transfer_state = 86
		transfer_state = 68
		transfer_state = 66
		transfer_state = 67
		transfer_state = 762
	}
	if = {
		limit = {
			NOE = {
				owns_state = 72
			}
		}
		KRO = {
			transfer_state = 72
		}
	}
	if = {
		limit = {
			KRO = {
				owns_state = 397
			}
		}
		FBK = {
			transfer_state = 72
		}
		KRO = {
			set_capital = {
				state = 10
			}
		}
	}
	FBK = {
		release = EST
		release = LIT
		release = LAT
	}
}

GNW_NOE_restore_kronii = {
	NOE = {
		set_politics = {
			ruling_party = pro_yagoo_kleptocracy
		}
		add_ideas = NOE_treaty_of_gotland_restore_kronii
	}
	set_stability = 0
	KRO = {
		transfer_state = 87
		transfer_state = 98
		transfer_state = 97
		transfer_state = 807
		transfer_state = 92
		transfer_state = 10
		transfer_state = 90
		transfer_state = 88
		transfer_state = 762
		transfer_state = 86
		transfer_state = 68
		transfer_state = 66
		transfer_state = 67
		transfer_state = 762
	}
	if = {
		limit = {
			NOE = {
				owns_state = 72
			}
		}
		KRO = {
			transfer_state = 72
		}
	}
	if = {
		limit = {
			KRO = {
				owns_state = 397
			}
		}
		FBK = {
			transfer_state = 72
		}
		KRO = {
			set_capital = {
				state = 10
			}
		}
	}
	NOE = {
		transfer_state = 11
		transfer_state = 188
		transfer_state = 189
		transfer_state = 784
		transfer_state = 962
		transfer_state = 963
		transfer_state = 964
		transfer_state = 12
		transfer_state = 190
		transfer_state = 959
		transfer_state = 961
		transfer_state = 13
		transfer_state = 191
		transfer_state = 965
		transfer_state = 1000
	}
}

GNW_set_up_gnw_scripted_effect = {
	#Subaru
	if = {
		limit = {
			check_variable = {
				var = FBK.gnw_subaru_concessions
				value = 1
				compare = greater_than_or_equals
			}
		}
		SUB = {
			leave_faction = yes
		}
		OSK = {
			leave_faction = yes
		}
		FBK = {
			add_to_faction = SUB
			add_to_faction = OSK
		}
		SUB = {
			declare_war_on = {
				target = NOE
			}
		}
		OSK = {
			declare_war_on = {
				target = NOE
			}
		}
	}
	#Kronii
	if = {
		limit = {
			check_variable = {
				var = FBK.gnw_kronii_concessions
				value = 1
				compare = equals
			}
		}
		KRO = {
			declare_war_on = {
				target = NOE
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = FBK.gnw_kronii_concessions
					value = 2
					compare = equals
				}
			}
			activate_mission = KRO_revolt_prep
		}
		else_if = {
			limit = {
				check_variable = {
					var = FBK.gnw_kronii_concessions
					value = 3
					compare = equals
				}
			}
			FBK = {
				end_puppet = KRO
			}
			KRO = {
				leave_faction = yes
			}
		}
	}
	if = {
		limit = {
			check_variable = {
				var = NOE.gnw_kronii_concessions
				value = 1
				compare = greater_than_or_equals
			}
		}
		NOE = {
			add_to_faction = KRO
		}
		KRO = {
			declare_war_on = {
				target = FBK
			}
		}
	}
	#Germany
	if = {
		limit = {
			GER = {
				exists = yes
			}
		}
		if = {
			limit = {
				check_variable = {
					var = FBK.gnw_germany_concessions
					value = 1
					compare = greater_than_or_equals
				}
			}
			FBK = {
				add_to_faction = GER
			}
			GER = {
				declare_war_on = {
					target = NOE
				}
			}
			else_if = {
				limit = {
					check_variable = {
						var = NOE.gnw_germany_concessions
						value = 1
						compare = greater_than_or_equals
					}
				}
				GER = {
					diplomatic_relation = {
						country = FBK
						relation = non_aggression_pact
					}
					diplomatic_relation = {
						country = NOE
						relation = non_aggression_pact
					}
				}
			}
		}
	}
	#Flare
	if = {
		limit = {
			OR = {
				check_variable = {
					var = FBK.gnw_germany_concessions
					value = 4
					compare = equals
				}
				check_variable = {
					var = FBK.gnw_germany_concessions
					value = 6
					compare = equals
				}
			}
		}
		FBK = {
			add_to_faction = FLA
		}
		FLA = {
			declare_war_on = {
				target = NOE
			}
		}
	}
	if = {
		limit = {
			check_variable = {
				var = NOE.gnw_germany_concessions
				value = 4
				compare = greater_than_or_equals
			}
		}
		NOE = {
			add_to_faction = FLA
		}
		FLA = {
			declare_war_on = {
				target = FBK
			}
		}
	}
	#Rushia
	if = {
		limit = {
			OR = {
				check_variable = {
					var = FBK.gnw_rushia_concessions
					value = 3
					compare = equals
				}
				check_variable = {
					var = FBK.gnw_rushia_concessions
					value = 5
					compare = equals
				}
			}
		}
		FBK = {
			add_to_faction = RUS
		}
		RUS = {
			declare_war_on = {
				target = NOE
			}
		}
		else_if = {
			limit = {
				check_variable = {
					var = NOE.gnw_rushia_concessions
					value = 2
					compare = greater_than_or_equals
				}
			}
			NOE = {
				add_to_faction = RUS
			}
			RUS = {
				declare_war_on = {
					target = FBK
				}
			}
		}
	}
	#Czecho
	if = {
		limit = {
			OR = {
				check_variable = {
					var = FBK.gnw_czechoslovakia_concessions
					value = 2
					compare = equals
				}
			}
		}
		FBK = {
			add_to_faction = CZE
		}
		CZE = {
			declare_war_on = {
				target = NOE
			}
		}
	}
	if = {
		limit = {
			OR = {
				check_variable = {
					var = NOE.gnw_czechoslovakia_concessions
					value = 2
					compare = equals
				}
			}
		}
		NOE = {
			add_to_faction = CZE
		}
		CZE = {
			declare_war_on = {
				target = FBK
			}
		}
	}
	#KIARA
	if = {
		limit = {
			check_variable = {
				var = FBK.gnw_kiara_concessions
				value = 1
				compare = greater_than_or_equals
			}
		}
		FBK = {
			add_to_faction = KIA
		}
		KIA = {
			declare_war_on = {
				target = NOE
			}
		}
	}
}
