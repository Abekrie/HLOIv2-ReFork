scripted_gui = {
  lhs_membership_gui = {
    window_name = "lhs_membership_gui_window"
    context_type = player_context
	
    visible = {
		has_country_flag = view_lhs_membership

    }

    effects = {
		close_button_click = {
			clr_country_flag = view_lhs_membership
		}
		lhs_voting_support_click = {
			ROOT = {
				add_to_array = {
					array = global.lhs_voted_support
					value = THIS.id
				}
				add_ideas = lhs_voted
			}
			set_variable = {
				var = global.lhs_count_support
				value = global.lhs_voted_support^num
			}
		}
		lhs_voting_reject_click = {
			ROOT = {
				add_to_array = {
					array = global.lhs_voted_reject
					value = THIS.id
				}
				add_ideas = lhs_voted
			}
			if = {
				limit = {
					has_global_flag = lhs_third_round_vote
				}
				add_to_variable = {
					var= global.lhs_third_round_vote_anti_count
					value = 1
				}
				else = {
						set_variable = {
						var = global.lhs_count_reject
						value = global.lhs_voted_reject^num
					}
				}
			}
		}
		lhs_voting_veto_click = {
			ROOT = {
				add_to_array = {
					array = global.lhs_voted_veto
					value = THIS.id
				}
				add_ideas = lhs_voted
			}
			set_variable = {
				var = global.lhs_count_veto
				value = global.lhs_count_veto^num
			}
		}
		lhs_vote_abstain_click = {
			ROOT = {
				add_to_array = {
					array = global.lhs_voted_abstain
					value = THIS.id
				}
				add_ideas = lhs_voted
			}
			if = {
				limit = {
					has_global_flag = lhs_third_round_vote
				}
				add_to_variable = {
					var= global.lhs_third_round_vote_anti_count
					value = 1
				}
				else = {
						set_variable = {
						var = global.lhs_count_abstain
						value = global.lhs_voted_abstain^num
					}
				}
			}
		}
		lhs_head_large_flag_click = {
			ROOT = {
				set_country_flag = view_lhs_friendly_decisions
			}
			clear_array = global.lhs_action_array
			THIS = {
				add_to_array = {
					array = global.lhs_action_array
					value = THIS.id
				}
			}
		}
		lhs_head_large_flag_right_click = {
			ROOT = {
				clr_country_flag = view_lhs_friendly_decisions
			}
			clear_array = global.lhs_action_array
		}	
		lhs_customs_union_country_flag_click = {
			ROOT = {
				set_country_flag = view_lhs_friendly_decisions
			}
			clear_array = global.lhs_action_array
			THIS = {
				add_to_array = {
					array = global.lhs_action_array
					value = THIS.id
				}
			}
		}
		lhs_customs_union_country_flag_right_click = {
			ROOT = {
				clr_country_flag = view_lhs_friendly_decisions
			}
			clear_array = global.lhs_action_array
		}	
		lhs_economic_development_gui_country_flag_click = {
			ROOT = {
				set_country_flag = view_lhs_friendly_decisions
			}
			clear_array = global.lhs_action_array
			THIS = {
				add_to_array = {
					array = global.lhs_action_array
					value = THIS.id
				}
			}
		}
		lhs_economic_development_gui_country_flag_right_click = {
			ROOT = {
				clr_country_flag = view_lhs_friendly_decisions
			}
			clear_array = global.lhs_action_array
		}	
		lhs_defensive_union_gui_country_flag_click = {
			ROOT = {
				set_country_flag = view_lhs_friendly_decisions
			}
			clear_array = global.lhs_action_array
			THIS = {
				add_to_array = {
					array = global.lhs_action_array
					value = THIS.id
				}
			}
		}
		lhs_defensive_union_gui_country_flag_right_click = {
			ROOT = {
				clr_country_flag = view_lhs_friendly_decisions
			}
			clear_array = global.lhs_action_array
		}
		lhs_security_council_one_flag_click = {
			ROOT = {
				set_country_flag = view_lhs_friendly_decisions
			}
			THIS = {
				add_to_array = {
					array = global.lhs_action_array
					value = THIS.id
				}
			}
		}
		lhs_security_council_one_flag_right_click = {
			ROOT = {
				clr_country_flag = view_lhs_friendly_decisions
			}
			clear_array = global.lhs_action_array
		}	
		lhs_security_council_two_large_flag_click = {
			ROOT = {
				set_country_flag = view_lhs_friendly_decisions
			}
			clear_array = global.lhs_action_array
			THIS = {
				add_to_array = {
					array = global.lhs_action_array
					value = THIS.id
				}
			}
		}
		lhs_security_council_two_large_flag_right_click = {
			ROOT = {
				clr_country_flag = view_lhs_friendly_decisions
			}
			clear_array = global.lhs_action_array
		}	
		lhs_security_council_three_large_flag_click = {
			ROOT = {
				set_country_flag = view_lhs_friendly_decisions
			}
			clear_array = global.lhs_action_array
			THIS = {
			add_to_array = {
					array = global.lhs_action_array
					value = THIS.id
				}
			}
		}
		lhs_security_council_three_large_flag_right_click = {
			ROOT = {
				clr_country_flag = view_lhs_friendly_decisions
			}
			clear_array = global.lhs_action_array
		}		
		lhs_security_council_four_large_flag_click = {
			ROOT = {
				set_country_flag = view_lhs_friendly_decisions
			}
			clear_array = global.lhs_action_array
			THIS = {
				add_to_array = {
					array = global.lhs_action_array
					value = THIS.id
				}
			}
		}
		lhs_security_council_four_large_flag_right_click = {
			ROOT = {
				clr_country_flag = view_lhs_friendly_decisions
			}
			clear_array = global.lhs_action_array
		}	
		lhs_security_council_five_large_flag_click = {
			ROOT = {
				set_country_flag = view_lhs_friendly_decisions
			}
			clear_array = global.lhs_action_array
			THIS = {
				add_to_array = {
					array = global.lhs_action_array
					value = THIS.id
				}
			}
		}
		lhs_security_council_five_large_flag_right_click = {
			ROOT = {
				clr_country_flag = view_lhs_friendly_decisions
			}
			clear_array = global.lhs_action_array
		}	
		lhs_security_council_six_large_flag_click = {
			ROOT = {
				set_country_flag = view_lhs_friendly_decisions
			}
			clear_array = global.lhs_action_array
			THIS = {
				add_to_array = {
					array = global.lhs_action_array
					value = THIS.id
				}
			}
		}
		lhs_security_council_six_large_flag_right_click = {
			ROOT = {
				clr_country_flag = view_lhs_friendly_decisions
			}
			clear_array = global.lhs_action_array
		}
    }
	triggers = {
		lhs_voting_support_click_enabled = {
			OR = {
				AND = {
					has_global_flag = lhs_first_round_vote
					ROOT = {
						is_in_array = {
							array = global.lhs_normal_voting
							value = THIS.id
						}
						lhs_security_council_trigger = no
						NOT = {
							is_in_array = {	
								array = global.lhs_vote_instigator
								value = THIS.id
							}
							has_idea = lhs_voted
						}
					}
				}
				AND = {
					has_global_flag = lhs_third_round_vote
					ROOT = {
						is_in_array = {
						array = global.lhs_normal_voting
						value = THIS.id
						}
						lhs_security_council_trigger = no
						NOT = {
							is_in_array = {	
								array = global.lhs_vote_instigator
								value = THIS.id
							}
							has_idea = lhs_voted
						}
					}
				}
				AND = {
					has_global_flag = lhs_second_round_vote
					ROOT = {
						lhs_security_council_trigger = yes
						is_in_array = {
						array = global.lhs_security_council
						value = THIS.id
						}
						NOT = {
							is_in_array = {	
								array = global.lhs_vote_instigator
								value = THIS.id
							}
							has_idea = lhs_voted
						}
					}
				}
			}
		}
		lhs_voting_reject_click_enabled = {
			OR = {
				AND = {
					has_global_flag = lhs_first_round_vote
					ROOT = {
					is_in_array = {
						array = global.lhs_normal_voting
						value = THIS.id
					}
					lhs_security_council_trigger = no
						NOT = {
							is_in_array = {	
								array = global.lhs_vote_instigator
								value = THIS.id
							}
							has_idea = lhs_voted
						}					
					}
				}
				AND = {
					has_global_flag = lhs_third_round_vote
					ROOT = {
					is_in_array = {
						array = global.lhs_normal_voting
						value = THIS.id
					}
					lhs_security_council_trigger = no
						NOT = {
							is_in_array = {	
								array = global.lhs_vote_instigator
								value = THIS.id
							}
							has_idea = lhs_voted
						}
					}
				}
				AND = {
					has_global_flag = lhs_second_round_vote
					ROOT = {
						is_in_array = {
						array = global.lhs_security_council
						value = THIS.id
						}
					lhs_security_council_trigger = yes
						NOT = {
							is_in_array = {	
								array = global.lhs_vote_instigator
								value = THIS.id
							}
							has_idea = lhs_voted
						}
					}
				}
			}
		}
		lhs_voting_veto_click_enabled = {
			OR = {
				AND = {
					has_global_flag = lhs_first_round_vote
					ROOT = {
					is_in_array = {
						array = global.lhs_normal_voting
						value = THIS.id
					}
					lhs_security_council_trigger = no
						NOT = {
							is_in_array = {	
								array = global.lhs_vote_instigator
								value = THIS.id
							}
							has_idea = lhs_voted
						}
					}
				}
				AND = {
					has_global_flag = lhs_third_round_vote
					ROOT = {
						is_in_array = {
						array = global.lhs_normal_voting
						value = THIS.id
						}
					lhs_security_council_trigger = no
						NOT = {
							is_in_array = {	
								array = global.lhs_vote_instigator
								value = THIS.id
							}
							has_idea = lhs_voted
						}
					}
				}
				AND = {
					has_global_flag = lhs_second_round_vote
					ROOT = {
						is_in_array = {
						array = global.lhs_security_council
						value = THIS.id
						}
					lhs_security_council_trigger = yes
						NOT = {
							is_in_array = {	
								array = global.lhs_vote_instigator
								value = THIS.id
							}
							has_idea = lhs_voted
						}
					}
				}
			}
		}
		lhs_vote_abstain_click_enabled = {
			OR = {
				AND = {
					has_global_flag = lhs_first_round_vote
					ROOT = {
					is_in_array = {
						array = global.lhs_normal_voting
						value = THIS.id
						}
					lhs_security_council_trigger = no
						NOT = {
							is_in_array = {	
								array = global.lhs_vote_instigator
								value = THIS.id
							}
							has_idea = lhs_voted
						}
					}
				}
				AND = {
					has_global_flag = lhs_third_round_vote
					ROOT = {
					is_in_array = {
						array = global.lhs_normal_voting
						value = THIS.id
						}
					lhs_security_council_trigger = no
						NOT = {
							is_in_array = {	
								array = global.lhs_vote_instigator
								value = THIS.id
							}
							has_idea = lhs_voted
						}
					}
				}
				AND = {
					has_global_flag = lhs_second_round_vote
					ROOT = {
					is_in_array = {
						array = global.lhs_security_council
						value = THIS.id
						}
					lhs_security_council_trigger = yes
						NOT = {
							is_in_array = {	
								array = global.lhs_vote_instigator
								value = THIS.id
							}
							has_idea = lhs_voted
						}
					}
				}
			}
		}
	}
	dynamic_lists = {
		lhs_voting_states_claim_gridbox = {
			array = global.lhs_voting_states_claim
			entry_container = lhs_voting_states_claim_entry_list
			change_scope = yes
		}
		lhs_instigator_gridbox = {		
			array = global.lhs_vote_instigator
			entry_container = lhs_instigator_list_entry
			change_scope = yes
		}		
		lhs_head_gui_gridbox = {
			array = global.lhs_head_flag
			entry_container = lhs_head_gui_list_entry
			change_scope = yes
		}		
		lhs_security_council_one_gui_gridbox = {
			array = global.lhs_security_council_one
			entry_container = lhs_security_council_one_gui_list_entry
			change_scope = yes
		}		
		lhs_security_council_two_gui_gridbox = {
			array = global.lhs_security_council_two
			entry_container = lhs_security_council_two_gui_list_entry
			change_scope = yes
		}		
		lhs_security_council_three_gui_gridbox = {
			array = global.lhs_security_council_three
			entry_container = lhs_security_council_three_gui_list_entry
			change_scope = yes
		}		
		lhs_security_council_four_gui_gridbox = {
			array = global.lhs_security_council_four
			entry_container = lhs_security_council_four_gui_list_entry
			change_scope = yes
		}		
		lhs_security_council_five_gui_gridbox = {
			array = global.lhs_security_council_five
			entry_container = lhs_security_council_five_gui_list_entry
			change_scope = yes
		}		
		lhs_security_council_six_gui_gridbox = {
			array = global.lhs_security_council_six
			entry_container = lhs_security_council_six_gui_list_entry
			change_scope = yes
		}
		lhs_customs_union_gui_gridbox = { 
			array = global.lhs_customs_union_flag
			entry_container = lhs_customs_union_gui_list_entry
			change_scope = yes
		}
		lhs_economic_development_gui_gridbox = {
			array = global.lhs_economic_development_flag
			entry_container = lhs_economic_development_gui_list_entry
			change_scope = yes
		}		
		lhs_defensive_union_gui_gridbox = {
			array = global.lhs_defensive_union_flag
			entry_container = lhs_defensive_union_gui_list_entry
			change_scope = yes
		}
	}
	properties = {
		lhs_trust_progress_bar = {
			frame = var:global.lhs_faith
		}
		brugg_legitimacy_progress_bar = {
			frame = var:global.brugg_legitimacy
		}
		lhs_instigator_flag = {
			image = [this.GetFlag]
		}
		lhs_security_council_one_flag = {
			image = [THIS.GetFlag]
		}		
		lhs_security_council_two_large_flag = {
			image = [THIS.GetFlag]
		}		
		lhs_security_council_three_large_flag = {
			image = [THIS.GetFlag]
		}		
		lhs_security_council_four_large_flag = {
			image = [THIS.GetFlag]
		}		
		lhs_security_council_five_flag_outline = {
			image = [THIS.GetFlag]
		}		
		lhs_security_council_six_large_flag = {
			image = [THIS.GetFlag]
		}		
		lhs_head_large_flag = {
			image = [THIS.GetFlag]
		}
		lhs_customs_union_country_flag = {
			image = [THIS.GetFlag]
		}		
		lhs_defensive_union_gui_country_flag = {
			image = [THIS.GetFlag]
		}		
		lhs_economic_development_gui_country_flag = {
			image = [THIS.GetFlag]
		}
	}
	ai_enabled = {
		always = yes
	}
	ai_test_interval = 180
	ai_test_variance = 0.8
	
	ai_check = {
		OR = {
			has_global_flag = lhs_first_round_vote
			has_global_flag = lhs_second_round_vote
			has_global_flag = lhs_third_round_vote
		}
	}
	ai_weights = {
		lhs_voting_support_click = {
			ai_will_do = {
				base = 0
			modifier = {
				add = 5
				OR = {
					has_global_flag = lhs_first_round_vote
					has_global_flag = lhs_second_round_vote
					has_global_flag = lhs_third_round_vote
				}
			}	
			modifier = {
			add = 50 
			is_debug = yes
			OR = {
			has_global_flag = lhs_first_round_vote
			has_global_flag = lhs_third_round_vote
			}
			}
				modifier = {
					add = 10
					voting_good_ideology = yes
				}
				modifier = {
					add = 5
					voting_kleptocracy = yes
				}
				modifier = {
					add = 10
					voting_same_ideology = yes
				}
				modifier = {
					add = 5
					voting_stable_and_peaceful = yes
				}
				modifier = {
					add = 20
					voting_lhs_goodboy = yes
				}
				modifier = {	
					add = 10 
					voting_good_relations = yes
				}
			}
		}
		lhs_voting_reject_click = {
			ai_will_do = {
				base = 0
			modifier = {
				add = 5
				OR = {
					has_global_flag = lhs_first_round_vote
					has_global_flag = lhs_second_round_vote
					has_global_flag = lhs_third_round_vote
				}
			}
			modifier = {
			add = 50 
			is_debug = yes
			has_global_flag = lhs_second_round_vote
			}
			modifier = {
				add = 10
				voting_badboy = yes
			}
			modifier = {
				add = 10
				voting_too_jingoist = yes
			}
			modifier = {
				add = 15
				voting_way_too_jingoist = yes
			}
			modifier = {
				add = 10
				voting_unstable = yes
			}
			modifier = {
				add = 15
				voting_very_badboy = yes
			}
			modifier = {
				add = 10
				voting_bad_relations = yes
			}
			modifier = {
				add = 10
				voting_not_lhs = yes
			}
			}
		}
		lhs_voting_veto_click = {
			ai_will_do = {
				base = 0
			modifier = {
				add = 5
				OR = {
					has_global_flag = lhs_first_round_vote
					has_global_flag = lhs_second_round_vote
					has_global_flag = lhs_third_round_vote
				}
			}
			modifier = {
				add = 5
				voting_badboy = yes
			}
			modifier = {
				add = 5
				voting_too_jingoist = yes
			}
			modifier = {
				add = 7
				voting_way_too_jingoist = yes
			}
			modifier = {
				add = 5
				voting_unstable = yes
			}
			modifier = {
				add = 7
				voting_very_badboy = yes
			}
			modifier = {
				add = 5
				voting_bad_relations = yes
			}
			modifier = {
				add = 5
				voting_not_lhs = yes
			}
			}
		}
		lhs_vote_abstain_click = {	
			ai_will_do = {	
				base = 0
			
			modifier = {
				add = 5
				OR = {
					has_global_flag = lhs_first_round_vote
					has_global_flag = lhs_second_round_vote
					has_global_flag = lhs_third_round_vote
				}
			}
			}
		}
		close_button_click = {	
			ai_will_do = {
				factor = 0
				modifier = {
					add = 15 
					has_country_flag = view_lhs_membership
					NOT = {
					has_global_flag = lhs_first_round_vote
					has_global_flag = lhs_second_round_vote
					has_global_flag = lhs_third_round_vote
					}
				}
			}
		}
	}
  }
   lhs_permanent_buttons_gui = {
    window_name = "lhs_permanent_buttons_container"
    context_type = player_context

	effects = {
		join_lhs_button_click = {
			set_global_flag = lhs_voting_join
			set_global_flag = lhs_voting
			set_global_flag = lhs_first_round_vote
			lhs_normal_voting_country_set = yes
			lhs_security_council_country_set = yes
			lhs_instigate_set = yes
			ROOT = {
				add_to_array = {
					array = global.lhs_entry_list
					value = THIS.id
				}
				add_political_power = -100
			}
		}
		leave_lhs_button_click = {
			ROOT = {
				add_political_power = -100
				country_event = lhs.8
			}
		}
	}
    visible = {
		has_country_flag = view_lhs_membership
		}
	triggers = {
		join_lhs_button_click_enabled = {
			lhs_not_voting_in_progress = yes
			NOT = {
				has_global_flag = lhs_voting
				has_global_flag = lhs_is_counting 
			}
			ROOT = {
				has_political_power > 100
				NOT = {
					OR = {
					has_idea = lhs_member
					has_idea = lhs_head
					has_idea = resistance_member
					has_idea = anti_member
					}
				}
			}
		}
		leave_lhs_button_click_enabled = {
			ROOT = {
				has_political_power > 100
				has_idea = lhs_member
				NOT = {
					has_idea = lhs_head
					has_idea = lhs_economic_development_gui
					has_idea = lhs_defensive_union_gui
					has_idea = lhs_security_council_one
					has_idea = lhs_security_council_two
					has_idea = lhs_security_council_three
					has_idea = lhs_security_council_four
					has_idea = lhs_security_council_five
					has_idea = lhs_security_council_six
				}
			}
		}
	}
  }  
  lhs_head_buttons_gui = {
    window_name = "lhs_head_buttons_container"
    context_type = player_context

    visible = {
		has_idea = lhs_head
		has_country_flag = view_lhs_membership
		has_country_flag = view_lhs_friendly_decisions
		}
	effects = {
		lhs_raid_antis_click = {
			ROOT = {
				country_event = lhs.16
			}
		}
		lhs_vote_sanctions_click = {
			set_global_flag = lhs_sanctions_vote
			every_country = {
				limit = {
					is_in_array = {
						array = global.lhs_action_array
						value = THIS.id
					}
				}
				set_country_flag = marked_for_sanction
			}
			every_country = {
				limit = {
					is_in_array = {
						array = global.lhs_member_flag
						value = THIS.id
					}
					NOT = {
						has_country_flag = marked_for_sanction
					}
				}
				country_event = lhs.17
			}
		}
		lhs_vote_remove_sanctions_click = {
			set_global_flag = lhs_remove_sanctions_vote
			every_country = {
					limit = {
						is_in_array = {
							array = global.lhs_action_array
							value = THIS.id
						}
					}
					set_country_flag = marked_for_remove_sanction
					}
				every_country = {
					limit = {
						is_in_array = {
							array = global.lhs_member_flag
							value = THIS.id
						}
						NOT = {
							has_country_flag = marked_for_remove_sanction
						}
					}
					country_event = lhs.20
				}
			}
		lhs_encourge_investment_click = {
			if = {
				limit = {
					NOT = {
						any_of = {
							array = global.lhs_member_flag
							value = THIS.id
							
							has_idea = lhs_investment_focus
						}
					}
				}
				every_country = {
					limit = {
						is_in_array = {
							array = global.lhs_action_array
							value = THIS.id
						}
					}
					add_ideas = lhs_investment_focus
					set_country_flag = {
						flag = lhs_investment_focus_set
						days = 180
						value = 1
					}
				}
				else = {
					ROOT = {
						country_event = lhs.23
					}
				}
			}
		}
		lhs_begin_the_crusade_click = {
			ROOT = {
				country_event = lhs.24
			}
		} 
	}
	triggers = {
		lhs_raid_antis_click_enabled = {
			ROOT = {
				has_political_power > 100
			}
			all_of = {
			array = global.lhs_action_array
			value = THIS.id
				
				check_variable = {
					var = PREV.anti_aggression
					value = 0
					compare = greater_than
				}
				NOT = {
					has_idea = large_anti_clearing
					has_idea = medium_anti_clearing
					has_idea = minor_anti_clearing
				}
			}		
		}
		lhs_vote_sanctions_click_enabled = { 
				ROOT = {
				has_political_power > 100
				}
				lhs_not_voting_in_progress = yes
		}
		lhs_vote_sanctions_visible = {
				all_of = {
				array = global.lhs_action_array
				value = THIS.id
				
				NOT = {
				has_relation_modifier = {
						target = THIS
						modifier = lhs_embargo_modifier
					}
				}
			}
		}
		lhs_vote_remove_sanctions_button_text_visible = {
				all_of = {
				array = global.lhs_action_array
				value = THIS.id
				
				NOT = {
				has_relation_modifier = {
						target = THIS
						modifier = lhs_embargo_modifier
					}
				}
			}
		}
		lhs_vote_remove_sanctions_visible = {
			all_of = {
			array = global.lhs_action_array
			value = THIS.id
				
			has_relation_modifier = {
					target = THIS
					modifier = lhs_embargo_modifier
				}
			}
		}
		lhs_encourge_investment_click_enabled = {
			ROOT = {
			has_political_power > 100
			}
			NOT = {
				any_of = {
					array = global.lhs_member_flag
					value = THIS.id
					
					has_country_flag = lhs_investment_focus_set
				}
			}
		}
		lhs_begin_the_crusade_click_enabled = {
			ROOT = {
				has_political_power > 100
			}
			NOT = {
				YAG = {
					has_war_with = AQA
				}
				has_global_flag = resistance_lhs_war
			}
		}
	}
  }
	lhs_security_buttons = {
		window_name = "lhs_security_buttons_container"
		context_type = player_context
		
		visible = {
			always = no
			#has_idea = lhs_member
			#has_country_flag = view_lhs_membership
			#has_country_flag = view_lhs_friendly_decisions
		}
	}
   lhs_military_buttons_gui = {
    window_name = "lhs_military_buttons_container"
    context_type = player_context

    visible = {
		has_country_flag = view_lhs_membership
		}
	effects = {
		lhs_request_aid_click = {
			set_global_flag = lhs_aid_request_deciding
			set_global_flag = lhs_voting
			set_global_flag = lhs_first_round_vote
			lhs_normal_voting_country_set = yes
			lhs_security_council_country_set = yes
			lhs_instigate_set = yes
			ROOT = {
				add_political_power = -100
				add_to_array = {
					array = global.lhs_aid_list
					value = THIS.id
				}
				add_ideas = lhs_aid_decided
			}
		}
		lhs_request_intervention_click = {
			set_global_flag = lhs_intervention_request_deciding
			set_global_flag = lhs_voting
			set_global_flag = lhs_first_round_vote
			lhs_normal_voting_country_set = yes
			lhs_security_council_country_set = yes
			lhs_instigate_set = yes
			
			ROOT = {
				add_political_power = -100
				add_to_array = {
					array = global.lhs_intervention_receive_list
					value = THIS.id
				}
				set_variable = { global.request_support_receiver = ROOT.id}
			}
			every_country = {
				limit = {
					has_war_with = global.request_support_receiver
				}
				set_variable = { global.this_nation_at_war = THIS.id }
			}
		}
	}
	triggers = {
		lhs_request_aid_click_enabled = {
			NOT = {
				has_global_flag = lhs_aid_request_deciding
			}
			ROOT = {
				has_political_power > 100
				has_war = yes
			}
			
		}
		lhs_request_intervention_click_enabled = {
			NOT = {
				has_global_flag = lhs_intervention_request_deciding
			}
			ROOT = {
				has_political_power > 100
				has_war = yes
			}
		}
	}
  }
    lhs_generic_buttons_gui = {
    window_name = "lhs_generic_buttons_container"
    context_type = player_context

    visible = {
		has_idea = lhs_member
		has_country_flag = view_lhs_membership
		has_country_flag = view_lhs_friendly_decisions
		}
	effects = {
		lhs_boost_lhs_parties_click = {
			ROOT = {
				add_political_power = -100
				set_country_flag = {
					flag = lhs_supported_lhs_party
					days = 180 
					value = 1
				}
			}
			every_country = {
				limit = {
					is_in_array = {
						array = global.lhs_action_array
						value = THIS.id
					}
				}	
				add_timed_idea = {
					idea =lhs_boost_parties_decision
					days = 180
				}
			}
		}
		lhs_peacekeeping_missions_click = {
			ROOT = {
				set_country_flag = {
				flag = lhs_supported_peacekeeping_mission
				days = 180
				value = 1
				}
			}
			every_country = {
				limit = {
					is_in_array = {
						array = global.lhs_action_array
						value = THIS.id
					}					
				}
				add_timed_idea = {
					idea = lhs_peacekeeping_mission
					days = 180
				}				
			}
		}
		lhs_rally_for_war_click = {
			ROOT = {
				set_country_flag = {
				flag = lhs_rallied_for_war_mission
				days = 180
				value = 1
				}
			}
			every_country = {
				limit = {
					is_in_array = {
						array = global.lhs_action_array
						value = THIS.id
					}					
				}
				add_timed_idea = {
					idea = lhs_rallied_for_war
					days = 180
				}				
			}			
		}
		lhs_send_military_support_click = {			
			ROOT = {
				set_country_flag = {
				flag = lhs_sent_military_support
				days = 180
				value = 1
				}
			}
			every_country = {
				limit = {
					is_in_array = {	
						array = global.lhs_action_array
						value = THIS.id
					}
				}
				add_timed_idea = {
					idea = lhs_received_military_support
					days = 180
				}
			}
		}
	}	
	triggers = {
		lhs_boost_lhs_parties_click_enabled = {
			ROOT = {
				has_political_power > 100
				NOT = {
					has_country_flag = lhs_supported_lhs_party
				}
			}
			NOT = {
				all_of = {
					array = global.lhs_action_array
					value = THIS.id
					
					has_idea = lhs_boost_parties_decision
				}
			}
		}
		lhs_peacekeeping_missions_click_enabled = {
			ROOT = {
				has_political_power > 100
				NOT = {
					has_country_flag = lhs_supported_peacekeeping_mission
				}
			}
			NOT = {
				all_of = {
					array = global.lhs_action_array
					value = THIS.id
					
					has_idea = lhs_peacekeeping_mission
				}
			}
		}
		lhs_rally_for_war_click_enabled = {
			ROOT = {
				has_political_power >100
				NOT = {
					has_country_flag = lhs_rallied_for_war_mission
				}
			}
			NOT = {
				all_of = {
					array = global.lhs_action_array
					value = THIS.id
					
					has_idea = lhs_rallied_for_war
				}
			}
		}
		lhs_send_military_support_click_enabled = {	
			ROOT = {
				has_political_power > 100
				NOT = {
					has_country_flag = lhs_send_military_support
				}
			}
			NOT = {
				all_of = {
					array = global.lhs_action_array
					value = THIS.id
					
					has_idea = lhs_received_military_support
				}
			}
		}
	}
  }
  lhs_voting_buttons_gui = {	
	window_name = "lhs_voting_buttons_container"
	context_type = player_context
	parent_window_name = "lhs_membership_gui_window"
	
	visible = {
		always = no
	}
  }
  resistance_membership_gui = {
    window_name = "resistance_membership_gui_window"
    context_type = player_context
	
    visible = {
		has_country_flag = view_resistance_membership

    }

    effects = {
		close_button_click = {
			clr_country_flag = view_resistance_membership
		}
		
    }
	triggers = {
	}
	dynamic_lists = {
		resistance_head_gui_gridbox = {
			array = global.resistance_head_flag
			entry_container = resistance_head_gui_list_entry
			change_scope = yes
		}
		coco_resistance_member_gui_gridbox = {
			array = global.coco_resistance_member_flag
			entry_container = coco_resistance_member_gui_list_entry
			change_scope = yes
		}
		aqua_resistance_member_gui_gridbox = {
			array = global.aqua_resistance_member_flag
			entry_container = aqua_resistance_member_gui_list_entry
			change_scope = yes
		}		
		neutral_resistance_member_gui_gridbox = {
			array = global.neutral_resistance_member_flag
			entry_container = neutral_resistance_member_gui_list_entry
			change_scope = yes
		}
	}
	properties = {
		resistance_head_gui_country_flag = {
			image = [THIS.GetFlag]
		}
		coco_resistance_member_gui_country_flag = {
			image = [THIS.GetFlag]
		}		
		aqua_resistance_member_gui_country_flag = {
			image = [THIS.GetFlag]
		}		
		neutral_resistance_member_gui_country_flag = {
			image = [THIS.GetFlag]
		}
	}
  }
  
    lhs_member_button_gui = {
    window_name = "lhs_member_button_window"
    context_type = player_context
	parent_window_token = politics_tab

    visible = {
		has_idea = lhs_member
    }

    effects = {
		lhs_member_button_click = {
		set_country_flag = view_lhs_membership
		clr_country_flag = view_resistance_membership
		}
		lhs_member_button_right_click = {
		clr_country_flag = view_lhs_membership
		clr_country_flag = view_resistance_membership
		}
    }
	ai_enabled = {
		always = yes
	}
	ai_test_interval = 100
	ai_test_variance = 0.8
	ai_max_weight_taken_per_test =1
	ai_check = {
		OR = {
			has_global_flag = lhs_first_round_vote
			has_global_flag = lhs_second_round_vote
			has_global_flag = lhs_third_round_vote
		}
	}
	ai_weights = {
		lhs_member_button_click = {
			ai_will_do = {
				base = 0
				
				modifier = {
					add = 500
					OR = {
						has_global_flag = lhs_first_round_vote
						has_global_flag = lhs_second_round_vote
						has_global_flag = lhs_third_round_vote
					}
				}
			}
		}
	}	
  }
   lhs_neutral_button_gui = {
    window_name = "lhs_neutral_button_window"
    context_type = player_context
	parent_window_token = politics_tab

    visible = {
			has_idea = neutral_member
	  }

    effects = {
		lhs_neutral_button_click = {
		set_country_flag = view_lhs_membership
		clr_country_flag = view_resistance_membership
		}
		lhs_neutral_button_right_click = {
		clr_country_flag = view_lhs_membership
		clr_country_flag = view_resistance_membership
		}
    }

  }
  lhs_hostile_button_gui = {
    window_name = "lhs_hostile_button_window"
    context_type = player_context
	parent_window_token = politics_tab


    visible = {
		if = {
		limit = {
		has_idea = resistance_member
		}
		else = {
		has_idea = anti_member
		}
		}
	  }

    effects = {
		lhs_hostile_button_click = {
		set_country_flag = view_lhs_membership
		clr_country_flag = view_resistance_membership
		}
		lhs_hostile_button_right_click = {
		clr_country_flag = view_lhs_membership
		clr_country_flag = view_resistance_membership
		}
    }
  }
  resistance_member_button_gui = {
    window_name = "resistance_member_button_window"
    context_type = player_context
	parent_window_token = politics_tab

    visible = {
		has_idea = resistance_member
    }

    effects = {
		resistance_member_button_click = {
		set_country_flag = view_resistance_membership
		clr_country_flag = view_lhs_membership
		}
		resistance_member_button_right_click = {
		clr_country_flag = view_resistance_membership
		clr_country_flag = view_lhs_membership
		}
    }
  }
   resistance_neutral_button_gui = {
    window_name = "resistance_neutral_button_window"
    context_type = player_context
	parent_window_token = politics_tab

    visible = {
			has_idea = neutral_member
			}
    effects = {
		resistance_neutral_button_click = {
		set_country_flag = view_resistance_membership
		clr_country_flag = view_lhs_membership
		}
		resistance_neutral_button_right_click = {
		clr_country_flag = view_resistance_membership
		clr_country_flag = view_lhs_membership
		}
    }

  }
  resistance_hostile_button_gui = {
    window_name = "resistance_hostile_button_window"
    context_type = player_context
	parent_window_token = politics_tab

    visible = {
		if = {
		limit = {
		has_idea = lhs_member
		}
		else = {
		has_idea = anti_member
		}
		}
    }

    effects = {
		resistance_hostile_button_click = {
		set_country_flag = view_resistance_membership
		clr_country_flag = view_lhs_membership
		}
		resistance_hostile_button_right_click = {
		clr_country_flag = view_resistance_membership
		clr_country_flag = view_lhs_membership
		}
    }
	}
}
