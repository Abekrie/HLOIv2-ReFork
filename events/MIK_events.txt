add_namespace = miko
#Turbs
#suisei is intervening in politic
country_event = {
	id = miko.1
	title = miko.1.t
	desc = miko.1.d
	picture = GFX_report_event_MIK_suisei_intervening_in_politics
	is_triggered_only = yes
	option = {
		name = miko.1.a
		add_timed_idea = {
			idea = resistance_boost
			days = 360
		}
	}
}

#suisei offers nap
country_event = {
	id = miko.2
	title = miko.2.t
	desc = miko.2.d
	picture = GFX_report_event_MIK_suisei_offers_nap
	is_triggered_only = yes
	option = {
		name = miko.2.a
		MIK = {
			set_truce = {
				target = SUI
				days = 720
			}
		}
	}
	option = {
		name = miko.2.b
		SUI = {
			add_opinion_modifier = {
				target = MIK
				modifier = rejected_friendly_relations
			}
		}
	}
}

#suisei offers alliance
country_event = {
	id = miko.3
	title = miko.3.t
	desc = miko.3.d
	picture = GFX_report_event_MIK_suisei_offers_alliance
	is_triggered_only = yes
	option = {
		name = miko.3.a
		SUI = {
			add_to_faction = MIK
		}
	}
	option = {
		name = miko.3.b
		SUI = {
			add_opinion_modifier = {
				target = MIK
				modifier = rejected_friendly_relations
			}
		}
	}
}

#we dont need them
country_event = {
	id = miko.4
	title = miko.4.t
	desc = miko.4.d
	picture = GFX_report_event_MIK_we_dont_need_them
	is_triggered_only = yes
	option = {
		name = miko.4.a
		SUI = {
			add_opinion_modifier = {
				target = MIK
				modifier = rejected_friendly_relations
			}
		}
		MIK = {
			add_opinion_modifier = {
				target = SUI
				modifier = rejected_friendly_relations
			}
		}
	}
	option = {
		name = miko.4.b
		# create_wargoal = {
		# 	target = SUI
		# 	type = puppet_wargoal_focus
		# }
		add_named_threat = {
			threat = 7.5
			name = MIK_responds_with_war
		}
	}
}

#Suisei demands land
country_event = {
	id = miko.5
	title = miko.5.t
	desc = miko.5.d
	picture = GFX_report_event_MIK_suisei_demands_land
	is_triggered_only = yes
	option = {
		name = miko.5.a
		SUI = {
			transfer_state = 165
		}
	}
	option = {
		name = miko.5.b
		if = {
			limit = {
				MIK = {
					is_in_faction_with = SUI
				}
			}
			leave_faction = yes
		}
		SUI = {
			add_opinion_modifier = {
				target = MIK
				modifier = despise
			}
			country_event = suisei.40
		}
		ai_chance = {
			#more likely to refuse
		}
	}
}

#Suisei negotiates with us over Morocco
country_event = {
	id = miko.6
	title = miko.6.t
	desc = miko.6.d
	picture = GFX_report_event_MIK_suisei_negotiate_moroco
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			set_global_flag = GEN_morocco_negotiations_init
			set_variable = {
				var = SUI.morocco_negotiations_overextend
				value = 0
			}
			set_variable = {
				var = MIK.morocco_negotiations_overextend
				value = 0
			}
		}
	}
	#We have no interest in this 
	option = {
		name = miko.6.a
		SUI = {
			country_event = suisei.91
		}
	}
	#Let's negotiate
	option = {
		name = miko.6.b
		SUI = {
			country_event = suisei.92
			country_event = {
				id = miko.7
				days = 5
			}
		}
		MIK = {
			country_event = {
				id = miko.8
				days = 5
			}
		}
		ai_chance = { base = 99
		}
	}
}

#MOROCCO NEGOTIATIONS - SUI 
country_event = {
	id = miko.7
	title = miko.7.t
	desc = miko.7.d
	picture = GFX_report_event_MIK_suisei_negotiate_moroco
	is_triggered_only = yes
	#We want all of Morocco, and the Rif -  WARNING : THIS WILL LEAD TO WAR WITH MIKO
	option = {
		name = miko.7.a
		add_to_variable = {
			var = SUI.morocco_negotiations_overextend
			value = 3
		}
	}
	#We want all of Morocco
	option = {
		name = miko.7.b
		add_to_variable = {
			var = SUI.morocco_negotiations_overextend
			value = 2
		}
	}
	#We only want a sphere of influence
	option = {
		name = miko.7.c
		add_to_variable = {
			var = SUI.morocco_negotiations_overextend
			value = 1
		}
	}
}

#MOROCCO NEGOTIATIONS - MIK 
country_event = {
	id = miko.8
	title = miko.8.t
	desc = miko.8.d
	picture = GFX_report_event_MIK_suisei_negotiate_moroco
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			SUI = {
				country_event = {
					id = miko.9
					days = 7
				}
			}
			MIK = {
				country_event = {
					id = miko.9
					days = 7
				}
			}
		}
	}
	#We want all of Morocco 
	option = {
		name = miko.8.a
		add_to_variable = {
			var = MIK.morocco_negotiations_overextend
			value = 3
		}
	}
	#We want to connect our territory
	option = {
		name = miko.8.b
		add_to_variable = {
			var = MIK.morocco_negotiations_overextend
			value = 2
		}
	}
	#We only want a sphere of influence
	option = {
		name = miko.8.c
		add_to_variable = {
			var = MIK.morocco_negotiations_overextend
			value = 1
		}
	}
}

#Morocco NEGOTIATIONS RESULT
country_event = {
	id = miko.9
	title = miko.9.t
	desc = miko.9.d
	picture = GFX_report_event_MIK_suisei_negotiate_moroco
	is_triggered_only = yes
	#Colliding Interests  - Suisei  - Miko refuses to give up the rif!
	option = {
		name = miko.9.a
		trigger = {
			check_variable = {
				tag = SUI
				var = SUI.morocco_negotiations_overextend
				value = 3
				compare = equals
			}
			check_variable = {
				var = MIK.morocco_negotiations_overextend
				value = 3
				compare = less_than_or_equals
			}
		}
		add_political_power = -5
		SUI = {
			country_event = suisei.146
		}
		hidden_effect = {
			clear_variable = SUI.morocco_negotiations_overextend
			clear_variable = MIK.morocco_negotiations_overextend
		}
	}
	#Colliding Interests  - They demanded the rif?!
	option = {
		name = miko.9.i
		trigger = {
			check_variable = {
				tag = MIK
				var = SUI.morocco_negotiations_overextend
				value = 3
				compare = equals
			}
			check_variable = {
				var = MIK.morocco_negotiations_overextend
				value = 3
				compare = less_than_or_equals
			}
		}
		add_political_power = -5
		hidden_effect = {
			clear_variable = SUI.morocco_negotiations_overextend
			clear_variable = MIK.morocco_negotiations_overextend
		}
	}
	#Agreement Reached - Strong Suisei
	option = {
		name = miko.9.b
		trigger = {
			check_variable = {
				var = SUI.morocco_negotiations_overextend
				value = 2
				compare = equals
			}
			check_variable = {
				var = MIK.morocco_negotiations_overextend
				value = 1
				compare = equals
			}
		}
		add_political_power = 5
		if = {
			limit = {
				tag = MIK
			}
			MIK = {
				add_political_power = 35
			}
		}
		if = {
			limit = {
				tag = SUI
			}
			SUI = {
				create_wargoal = {
					target = MOR
					type = annex_everything
				}
			}
		}
		hidden_effect = {
			clear_variable = SUI.morocco_negotiations_overextend
			clear_variable = MIK.morocco_negotiations_overextend
		}
	}
	#Agreement Reached - SUISEI - Concession to Miko? sure!
	option = {
		name = miko.9.c
		trigger = {
			tag = SUI
			check_variable = {
				var = SUI.morocco_negotiations_overextend
				value = 2
				compare = equals
			}
			check_variable = {
				var = MIK.morocco_negotiations_overextend
				value = 2
				compare = equals
			}
		}
		add_political_power = 5
		set_country_flag = SUI_promised_miko_land
		MIK = {
			country_event = miko.10
		}
		hidden_effect = {
			clear_variable = SUI.morocco_negotiations_overextend
			clear_variable = MIK.morocco_negotiations_overextend
		}
	}
	#Agreement Reached - SUISEI - Concession to Miko? nope!
	option = {
		name = miko.9.f
		trigger = {
			tag = SUI
			check_variable = {
				var = SUI.morocco_negotiations_overextend
				value = 2
				compare = equals
			}
			check_variable = {
				var = MIK.morocco_negotiations_overextend
				value = 2
				compare = equals
			}
		}
		add_political_power = 5
		MIK = {
			country_event = miko.11
		}
		SUI = {
			country_event = miko.11
		}
		hidden_effect = {
			clear_variable = SUI.morocco_negotiations_overextend
			clear_variable = MIK.morocco_negotiations_overextend
		}
	}
	#Agreement Reached - PARTITION MOROCCO - for miko*, Suisei gets an event with no effect
	option = {
		name = miko.9.e
		trigger = {
			tag = MIK
			check_variable = {
				var = SUI.morocco_negotiations_overextend
				value = 1
				compare = equals
			}
			check_variable = {
				var = MIK.morocco_negotiations_overextend
				value = 1
				compare = equals
			}
		}
		add_political_power = 25
		MOR = {
			country_event = morocco.1
		}
		hidden_effect = {
			clear_variable = SUI.morocco_negotiations_overextend
			clear_variable = MIK.morocco_negotiations_overextend
		}
	}
	#No effect as seen above
	option = {
		name = miko.9.e_suisei
		trigger = {
			tag = SUI
			check_variable = {
				var = SUI.morocco_negotiations_overextend
				value = 1
				compare = equals
			}
			check_variable = {
				var = MIK.morocco_negotiations_overextend
				value = 1
				compare = equals
			}
		}
		add_political_power = 25
	}
	#Agreement Reached - Strong Miko - Conquest
	option = {
		name = miko.9.g
		trigger = {
			check_variable = {
				var = SUI.morocco_negotiations_overextend
				value = 1
				compare = equals
			}
			check_variable = {
				var = MIK.morocco_negotiations_overextend
				value = 3
				compare = equals
			}
		}
		add_political_power = 25
		if = {
			limit = {
				tag = MIK
			}
			MIK = {
				create_wargoal = {
					target = MOR
					type = annex_everything
				}
			}
		}
		hidden_effect = {
			clear_variable = SUI.morocco_negotiations_overextend
			clear_variable = MIK.morocco_negotiations_overextend
		}
	}
	#Agreement Reached - Strong Miko - Demand
	option = {
		name = miko.9.h
		trigger = {
			check_variable = {
				var = SUI.morocco_negotiations_overextend
				value = 1
				compare = equals
			}
			check_variable = {
				var = MIK.morocco_negotiations_overextend
				value = 2
				compare = equals
			}
		}
		add_political_power = 25
		if = {
			limit = {
				tag = MIK
			}
			MOR = {
				country_event = morocco.2
			}
		}
		hidden_effect = {
			clear_variable = SUI.morocco_negotiations_overextend
			clear_variable = MIK.morocco_negotiations_overextend
		}
	}
}

#Morocco cedes to us - Concessions
country_event = {
	id = miko.12
	title = miko.12.t
	desc = miko.12.d
	picture = GFX_report_event_MIK_morocco_concessions
	is_triggered_only = yes
	#Nice
	option = {
		name = miko.12.a
		add_political_power = 75
	}
}

#Morocco refuses us - Concessions
country_event = {
	id = miko.13
	title = miko.13.t
	desc = miko.13.d
	picture = GFX_report_event_MIK_morocco_concessions
	is_triggered_only = yes
	#War
	option = {
		name = miko.13.a
		create_wargoal = {
			target = MOR
			type = topple_government
		}
	}
}

#Morocco cedes to us - Land transfer
country_event = {
	id = miko.14
	title = miko.14.t
	desc = miko.14.d
	picture = GFX_report_event_MIK_morocco_cedes_land_transfer
	is_triggered_only = yes
	#cewl
	option = {
		name = miko.14.a
		add_political_power = 25
		add_popularity = {
			ideology = var:current_party_ideology_group
			popularity = 0.15
		}
	}
}

#Morocco refuses us - Land transfer
country_event = {
	id = miko.15
	title = miko.15.t
	desc = miko.15.d
	picture = GFX_report_event_MIK_morocco_cedes_land_transfer
	is_triggered_only = yes
	#War
	option = {
		name = miko.15.a
		1169 = {
			add_claim_by = MIK
		}
		create_wargoal = {
			target = MOR
			type = take_claimed_state
		}
		ai_chance = {
			#always war
		}
	}
	#Actually no
	option = {
		name = miko.15.b
		add_stability = -0.1
	}
}

#MUMEI RECONQUER EGYPT - MUMEI WANTS OUR HELP
country_event = {
	id = miko.16
	title = miko.16.t
	desc = miko.16.d
	picture = GFX_report_event_MIK_mumei_asks_for_help
	is_triggered_only = yes
	#War
	option = {
		name = miko.16.a
		MUM = {
			clear_variable = MUM.international_representative
			set_variable = {
				var = MUM.international_representative
				value = THIS.id
			}
			country_event = mumei.10
		}
	}
	#Actually no
	option = {
		name = miko.16.b
		MUM = {
			set_country_flag = MUM_miko_refuses_to_help
			country_event = mumei.11
		}
	}
}

#MUMEI RECONQUER EGYPT - MUMEI DISAVOWS US
country_event = {
	id = miko.17
	title = miko.17.t
	desc = miko.17.d
	picture = GFX_report_event_MIK_mumei_disavows_us
	is_triggered_only = yes
	#Bruh
	option = {
		name = miko.17.a
	}
}

#MUMEI RECONQUER EGYPT - DEVISING A TREATY
country_event = {
	id = miko.18
	title = miko.18.t
	desc = miko.18.desc
	picture = GFX_report_event_MIK_mumei_devises_treaty
	is_triggered_only = yes
	#Plan A - Free Seas Proposal - The Rif + Gibraltar and the Suez Canal become international zones, Sudan becomes independent, Pekora withdraws from Egypt
	option = {
		name = miko.18.a
		MUM = {
			country_event = mumegypt.3
			set_country_flag = MUM_miko_devised_treaty
			set_country_flag = MUM_miko_treaty_free_seas
		}
		PEK = {
			country_event = mumegypt.3
		}
		YAG = {
			country_event = mumegypt.3
		}
	}
	#Plan B - Pan-Arab Federation - Egypt, Sudan, Palestine, the Canal, and Lebanon become part of an Arab Federation, referendums to be held in Korone's Arab territories, Neutral Constitution. Pekora and Yagoo withdraw from North Africa
	option = {
		name = miko.18.b
		MUM = {
			country_event = mumegypt.3
			set_country_flag = MUM_miko_devised_treaty
			set_country_flag = MUM_miko_treaty_pan_arab
		}
		PEK = {
			country_event = mumegypt.3
		}
		YAG = {
			country_event = mumegypt.3
		}
		ai_will_do = {
			base = 1
		}
	}
	#Plan C - Self-Determination - Pekora withdraws from Egypt, Suez Canal is returned to Mumei, Palestine and Lebanon are made independent. Sudan is made independent. Neutral Constitution for Mumei
	option = {
		name = miko.18.c
		MUM = {
			country_event = mumegypt.3
			set_country_flag = MUM_miko_devised_treaty
			set_country_flag = MUM_miko_treaty_self_determination
		}
		PEK = {
			country_event = mumegypt.3
		}
		YAG = {
			country_event = mumegypt.3
		}
	}
	#Plan D - Pro-Peko Solution - Mumei is given a pro-Pekora constitution, Pekora withdraws from Egypt, Yagoo retains control of the Canal, Palestine and Lebanon, the regions surrounding the Canal must be demilitarized, 
	option = {
		name = miko.18.d
		MUM = {
			country_event = mumegypt.3
			set_country_flag = MUM_miko_devised_treaty
			set_country_flag = MUM_miko_treaty_pro_peko
		}
		PEK = {
			country_event = mumegypt.3
		}
		YAG = {
			country_event = mumegypt.3
		}
	}
}

#Suisei's army begins deserting, we have won
country_event = {
	id = miko.19
	title = miko.19.t
	desc = miko.19.desc
	picture = GFX_report_SUI_commies_reunite_france
	is_triggered_only = yes
	fire_only_once = yes
	#Send our demands, seize all captured territory and take all of morocco!
	option = {
		name = miko.19.a
		SUI = {
			country_event = suisei.149
		}
		}
}

#Our country is protesting our war heavily and our army is starting to desert...
country_event = {
	id = miko.20
	title = miko.20.t
	desc = miko.20.desc
	picture = GFX_report_SUI_commies_reunite_france
	is_triggered_only = yes
	fire_only_once = yes
	#Cowards! Defend our lands!
	option = {
		name = miko.20.a
		SUI = {
			country_event = suisei.147
		}
		}
}

#Suisei is forcing a very heavy peace deal on us
country_event = {
	id = miko.21
	title = miko.21.t
	desc = miko.21.desc
	picture = GFX_report_SUI_commies_reunite_france
	is_triggered_only = yes
	fire_only_once = yes
	#There's no choice... sign it
	option = {
		name = miko.21.a
		SUI_morocco_win = yes
		}
}

#Suisei forced out of morocco 
country_event = {
	id = miko.22
	title = miko.22.t
	desc = miko.22.desc
	picture = GFX_report_SUI_commies_reunite_france
	is_triggered_only = yes
	fire_only_once = yes
	#What the hell, we're losing to morocco now?! Kill them already!
	option = {
		name = miko.22.a
		clr_country_flag = mik_take_marrakesh
		clr_country_flag = mik_take_casablanca
		clr_country_flag = mik_take_congo
		clr_country_flag = mik_take_algiers
		clr_country_flag = mik_take_constantine
		clr_country_flag = mik_take_bayonne
		clr_country_flag = mik_take_toulouse_or_bordeaux
		clr_country_flag = mik_take_fes
		}
}

#Our country is protesting our war heavily and our army is starting to desert... everything seems to have been useless since morocco is still alive.
#As we have been forced to hastily retreat, morocco and suisei have seized our moroccean states and western sahara has also fallen...
country_event = {
	id = miko.23
	title = miko.23.t
	desc = miko.23.desc
	picture = GFX_report_SUI_commies_reunite_france
	is_triggered_only = yes
	fire_only_once = yes
	#Seriously, morocco won?!
	option = {
		name = miko.23.a
		add_stability = -0.10
		add_war_support = -0.20
		SUI = {
			clr_country_flag = morocco_threesome
			set_country_flag = SUI_morocco_solo
		}
		clr_country_flag = mik_take_marrakesh
		clr_country_flag = mik_take_casablanca
		clr_country_flag = mik_take_congo
		clr_country_flag = mik_take_algiers
		clr_country_flag = mik_take_constantine
		clr_country_flag = mik_take_bayonne
		clr_country_flag = mik_take_toulouse_or_bordeaux
		clr_country_flag = mik_take_fes
		if = {
			limit = {
				290 = {
					is_controlled_by = SUI
				}
			}
			290 = {
				transfer_state_to = SUI
			}
		}
		else = {
			290 = {
				transfer_state_to = MOR
			}
		}
		if = {
			limit = {
				783 = {
					is_controlled_by = SUI
				}
			}
			783 = {
				transfer_state_to = SUI
			}
		}
		else = {
			783 = {
				transfer_state_to = MOR
			}
		}
		if = {
			limit = {
				699 = {
					is_controlled_by = SUI
				}
			}
			699 = {
				transfer_state_to = SUI
			}
		}
		else = {
			699 = {
				transfer_state_to = MOR
			}
		}
		MIK = {
			white_peace = {
				tag = MOR
				message = Morocco_scripted_peace_loc_5 #Morocco defeated Miko
			}
			white_peace = {
				tag = SUI
			}
	}
	news_event = global_holo.39
		}
}

#Heavy anti war protests combined with the fact suisei was already forced out are forcing us to surrender to morocco
#As we have been forced to hastily sign this peace, the peace terms were very heavy on us and morocco has essentially reunited itself
country_event = {
	id = miko.24
	title = miko.24.t
	desc = miko.24.desc
	picture = GFX_report_SUI_commies_reunite_france
	is_triggered_only = yes
	fire_only_once = yes
	#Seriously, morocco won?!
	option = {
		name = miko.24.a
		white_peace = {
			tag = MOR
			message = Morocco_scripted_peace_loc_6 #Morocco won moroccan war
		}
		add_stability = -0.10
		add_war_support = -0.20
		clr_country_flag = MIK_morocco_solo
			MOR = {
				every_core_state = {
					transfer_state_to = MOR
				}
			}
			699 = {
				transfer_state_to = MOR
			}
		}
}

#We have narrowly won in morocco
country_event = {
	id = miko.25
	title = miko.25.t
	desc = miko.25.desc
	picture = GFX_report_SUI_commies_reunite_france
	is_triggered_only = yes
	fire_only_once = yes
	#Not the great success we wanted but we'll take it
	option = {
		name = miko.25.a
		news_event = global_holo.41
		}
}